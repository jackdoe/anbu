<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ANBU: Python Coding Challenges</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/matifandy8/NeoBrutalismCSS/dist/index.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Lexend+Mega:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Lexend Mega', sans-serif;
      background: #ffd700;
      height: 100vh;
      overflow: hidden;
    }

    .container {
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    .header {
      background: #4a90e2;
      border-bottom: 5px solid #000;
      padding: 15px 20px;
      box-shadow: 0 5px 0 #000;
    }

    .header h1 {
      font-size: 1.3rem;
      color: #000;
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    .header-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
    }

    .challenge-nav {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .nav-btn {
      width: 50px;
      height: 50px;
      background: #fff;
      border: 4px solid #000;
      cursor: pointer;
      font-size: 20px;
      font-weight: bold;
      box-shadow: 4px 4px 0 #000;
      transition: all 0.1s;
    }

    .nav-btn:hover:not(:disabled) {
      transform: translate(2px, 2px);
      box-shadow: 2px 2px 0 #000;
    }

    .nav-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .challenge-counter {
      background: #fff;
      border: 4px solid #000;
      padding: 10px 20px;
      font-weight: bold;
      box-shadow: 4px 4px 0 #000;
    }

    .action-buttons {
      display: flex;
      gap: 10px;
    }

    .mobile-action-buttons {
      display: none;
    }

    .btn {
      padding: 12px 24px;
      font-family: 'Lexend Mega', sans-serif;
      font-weight: bold;
      font-size: 14px;
      border: 4px solid #000;
      cursor: pointer;
      text-transform: uppercase;
      box-shadow: 5px 5px 0 #000;
      transition: all 0.1s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn:hover:not(:disabled) {
      transform: translate(2px, 2px);
      box-shadow: 3px 3px 0 #000;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn-reset {
      background: #fff;
      color: #000;
    }

    .btn-submit {
      background: #4ecdc4;
      color: #000;
    }

    .btn-games {
      background: #fff;
      color: #000;
    }

    .btn-help {
      background: #a9d3ab;
      color: #000;
      padding: 10px 18px;
      font-size: 13px;
    }

    .main-content {
      display: flex;
      flex: 1;
      overflow: hidden;
    }

    .sidebar {
      width: 380px;
      background: #f7f7f7;
      border-right: 5px solid #000;
      padding: 20px;
      overflow-y: auto;
      box-shadow: 5px 0 0 #000;
    }

    .sidebar h2 {
      font-size: 1.5rem;
      margin-bottom: 10px;
      color: #000;
    }

    .description {
      background: #fff;
      border: 4px solid #000;
      padding: 15px;
      margin-bottom: 20px;
      box-shadow: 4px 4px 0 #000;
    }

    .test-cases h3 {
      margin-bottom: 15px;
      font-size: 1.1rem;
    }

    .test-case {
      background: #fff;
      border: 4px solid #000;
      padding: 12px;
      margin-bottom: 12px;
      box-shadow: 3px 3px 0 #000;
      font-size: 0.85rem;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    .test-case code {
      word-wrap: break-word;
      overflow-wrap: break-word;
      white-space: pre-wrap;
      display: inline-block;
      max-width: 100%;
    }

    .test-input {
      color: #ff8c42;
      font-weight: bold;
    }

    .test-expected {
      color: #4ecdc4;
      font-weight: bold;
    }

    .loading-indicator {
      background: #ffd700;
      border: 4px solid #000;
      padding: 12px;
      margin-top: 15px;
      box-shadow: 3px 3px 0 #000;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .editor-section {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .editor-tab {
      background: #2d2d2d;
      border-bottom: 4px solid #000;
      padding: 10px 20px;
      font-weight: bold;
      color: #ffd700;
      font-size: 0.9rem;
    }

    #editor {
      flex: 1;
      border-right: 5px solid #000;
    }

    .output-section {
      height: 300px;
      background: #1e1e1e;
      border-top: 5px solid #000;
      overflow-y: auto;
      box-shadow: 0 -5px 0 #000;
    }

    .output-header {
      background: #4ecdc4;
      border-bottom: 4px solid #000;
      padding: 12px 20px;
      font-weight: bold;
      color: #000;
      text-transform: uppercase;
    }

    .output-content {
      padding: 20px;
      color: #fff;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      white-space: pre-wrap;
    }

    .test-results {
      padding: 20px;
    }

    .test-result {
      background: #fff;
      border: 4px solid #000;
      padding: 15px;
      margin-bottom: 12px;
      box-shadow: 4px 4px 0 #000;
    }

    .test-result.passed {
      background: #4ecdc4;
    }

    .test-result.failed {
      background: #ffb3b3;
    }

    .test-result-title {
      font-weight: bold;
      margin-bottom: 8px;
      font-size: 1rem;
    }

    .test-result-details {
      font-size: 0.85rem;
      line-height: 1.6;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    .test-result-details div {
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    /* Games Modal Styles */
    .games-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .games-container {
      background: #ffd700;
      border: 5px solid #000;
      box-shadow: 10px 10px 0 #000;
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      padding: 20px;
    }

    .games-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 4px solid #000;
    }

    .games-header h2 {
      font-size: 1.8rem;
      margin: 0;
    }

    .close-btn {
      width: 50px;
      height: 50px;
      background: #ff8c42;
      border: 4px solid #000;
      cursor: pointer;
      font-size: 24px;
      font-weight: bold;
      box-shadow: 4px 4px 0 #000;
      transition: all 0.1s;
    }

    .close-btn:hover {
      transform: translate(2px, 2px);
      box-shadow: 2px 2px 0 #000;
    }

    .games-menu {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }

    .game-btn {
      background: #fff;
      border: 4px solid #000;
      padding: 30px;
      cursor: pointer;
      box-shadow: 6px 6px 0 #000;
      transition: all 0.1s;
      font-family: 'Lexend Mega', sans-serif;
    }

    .game-btn:hover {
      transform: translate(3px, 3px);
      box-shadow: 3px 3px 0 #000;
    }

    .game-icon {
      font-size: 4rem;
      margin-bottom: 10px;
    }

    .game-name {
      font-size: 1.2rem;
      font-weight: bold;
      color: #000;
    }

    .game-area {
      text-align: center;
    }

    .game-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding: 15px;
      background: #fff;
      border: 4px solid #000;
      box-shadow: 4px 4px 0 #000;
    }

    .btn-back {
      background: #fff;
      color: #000;
      padding: 10px 20px;
    }

    #gameScore {
      font-size: 1.2rem;
      font-weight: bold;
    }

    #gameCanvas {
      background: #fff;
      border: 4px solid #000;
      box-shadow: 6px 6px 0 #000;
      display: block;
      margin: 0 auto 20px;
    }

    #gameInstructions {
      background: #4ecdc4;
      border: 4px solid #000;
      padding: 15px;
      box-shadow: 4px 4px 0 #000;
      margin-top: 15px;
      font-size: 0.9rem;
      line-height: 1.6;
    }

    .game-over-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }

    .game-over-box {
      background: #ffd700;
      border: 5px solid #000;
      box-shadow: 10px 10px 0 #000;
      padding: 40px;
      text-align: center;
      max-width: 400px;
    }

    .game-over-title {
      font-size: 2.5rem;
      margin-bottom: 20px;
      color: #000;
      text-transform: uppercase;
    }

    .game-over-message {
      font-size: 1.2rem;
      margin-bottom: 30px;
      color: #000;
    }

    .game-over-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
    }

    .btn-restart {
      background: #4ecdc4;
      color: #000;
      padding: 12px 24px;
    }

    .btn-menu {
      background: #ff8c42;
      color: #000;
      padding: 12px 24px;
      font-size: 0.9rem;
    }

    .mobile-game-controls {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .control-row {
      display: flex;
      gap: 10px;
      justify-content: center;
    }

    .control-btn {
      width: 60px;
      height: 60px;
      background: #4a90e2;
      border: 4px solid #000;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 4px 4px 0 #000;
      transition: all 0.1s;
      font-weight: bold;
    }

    .control-btn:active {
      transform: translate(2px, 2px);
      box-shadow: 2px 2px 0 #000;
    }

    @media (min-width: 769px) {
      .mobile-game-controls {
        display: none !important;
      }
    }

    @media (max-width: 1024px) {
      .sidebar {
        width: 320px;
      }

      .header h1 {
        font-size: 1.5rem;
      }
    }

    @media (max-width: 768px) {
      body {
        overflow: auto;
      }

      .container {
        height: auto;
        min-height: 100vh;
      }

      .header {
        padding: 12px 15px;
      }

      .header h1 {
        font-size: 1rem;
        margin-bottom: 8px;
      }

      .header-controls {
        flex-direction: column;
        gap: 10px;
      }

      .challenge-nav {
        width: 100%;
        justify-content: center;
      }

      .nav-btn {
        width: 45px;
        height: 45px;
        font-size: 18px;
      }

      .challenge-counter {
        padding: 8px 16px;
        font-size: 0.85rem;
      }

      .action-buttons {
        display: none;
      }

      .mobile-action-buttons {
        display: flex;
        gap: 10px;
        padding: 15px 20px;
        background: #f7f7f7;
        border-bottom: 5px solid #000;
        box-shadow: 0 5px 0 #000;
        flex-wrap: wrap;
      }

      .mobile-action-buttons .btn {
        padding: 10px 16px;
        font-size: 12px;
        flex: 1;
        min-width: 90px;
      }

      .main-content {
        flex-direction: column;
        overflow: visible;
      }

      .sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 5px solid #000;
        box-shadow: 0 5px 0 #000;
        height: auto;
        overflow-y: visible;
      }

      .sidebar h2 {
        font-size: 1.2rem;
      }

      .description {
        font-size: 0.9rem;
      }

      .test-cases h3 {
        font-size: 1rem;
      }

      .test-case {
        font-size: 0.8rem;
        padding: 10px;
      }

      .editor-section {
        min-height: 300px;
      }

      .editor-tab {
        padding: 8px 15px;
        font-size: 0.85rem;
      }

      #editor {
        border-right: none;
        min-height: 300px;
      }

      .output-section {
        height: auto;
        min-height: 200px;
      }

      .output-header {
        padding: 10px 15px;
        font-size: 0.9rem;
      }

      .output-content {
        padding: 15px;
        font-size: 13px;
      }

      .test-results {
        padding: 15px;
      }

      .test-result {
        padding: 12px;
        margin-bottom: 10px;
      }

      .test-result-title {
        font-size: 0.9rem;
      }

      .test-result-details {
        font-size: 0.8rem;
      }
    }

    @media (max-width: 480px) {
      .header {
        padding: 10px;
      }

      .header h1 {
        font-size: 0.85rem;
        letter-spacing: 1px;
      }

      .nav-btn {
        width: 40px;
        height: 40px;
        font-size: 16px;
        border: 3px solid #000;
        box-shadow: 3px 3px 0 #000;
      }

      .challenge-counter {
        padding: 6px 12px;
        font-size: 0.75rem;
        border: 3px solid #000;
        box-shadow: 3px 3px 0 #000;
      }

      .mobile-action-buttons {
        padding: 12px 15px;
        border-bottom: 4px solid #000;
        box-shadow: 0 4px 0 #000;
        gap: 8px;
      }

      .mobile-action-buttons .btn {
        padding: 9px 14px;
        font-size: 11px;
        border: 3px solid #000;
        box-shadow: 4px 4px 0 #000;
        min-width: 80px;
      }

      .sidebar {
        padding: 15px;
      }

      .sidebar h2 {
        font-size: 1rem;
      }

      .description {
        font-size: 0.85rem;
        padding: 12px;
        border: 3px solid #000;
        box-shadow: 3px 3px 0 #000;
      }

      .test-cases h3 {
        font-size: 0.9rem;
      }

      .test-case {
        font-size: 0.75rem;
        padding: 8px;
        border: 3px solid #000;
        box-shadow: 2px 2px 0 #000;
      }

      .editor-tab {
        padding: 6px 12px;
        font-size: 0.85rem;
      }

      #editor {
        min-height: 250px;
      }

      .output-content {
        padding: 12px;
        font-size: 12px;
      }

      .test-result {
        padding: 10px;
        border: 3px solid #000;
        box-shadow: 3px 3px 0 #000;
      }

      .test-result-title {
        font-size: 0.85rem;
      }

      .test-result-details {
        font-size: 0.75rem;
      }

      .loading-indicator {
        font-size: 0.8rem;
        padding: 10px;
        border: 3px solid #000;
        box-shadow: 2px 2px 0 #000;
      }

      .games-modal {
        padding: 10px;
      }

      .games-container {
        padding: 15px;
        max-height: 95vh;
        border: 4px solid #000;
        box-shadow: 6px 6px 0 #000;
      }

      .games-header h2 {
        font-size: 1.2rem;
      }

      .close-btn {
        width: 40px;
        height: 40px;
        font-size: 20px;
        border: 3px solid #000;
        box-shadow: 3px 3px 0 #000;
      }

      .games-menu {
        grid-template-columns: 1fr;
        gap: 15px;
      }

      .game-btn {
        padding: 20px;
        border: 3px solid #000;
        box-shadow: 4px 4px 0 #000;
      }

      .game-icon {
        font-size: 3rem;
      }

      .game-name {
        font-size: 1rem;
      }

      .game-controls {
        flex-direction: column;
        gap: 10px;
        padding: 12px;
        border: 3px solid #000;
        box-shadow: 3px 3px 0 #000;
      }

      .btn-back {
        align-self: flex-start;
      }

      #gameScore {
        font-size: 1rem;
      }

      #gameCanvas {
        max-width: 100%;
        border: 3px solid #000;
        box-shadow: 4px 4px 0 #000;
      }

      #gameInstructions {
        font-size: 0.8rem;
        padding: 12px;
        border: 3px solid #000;
        box-shadow: 3px 3px 0 #000;
      }

      .control-btn {
        width: 55px;
        height: 55px;
        font-size: 20px;
        border: 3px solid #000;
        box-shadow: 3px 3px 0 #000;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="header-controls">
        <div class="challenge-nav">
          <button class="nav-btn" id="prevBtn" onclick="prevChallenge()">‚óÄ</button>
          <div class="challenge-counter">
            <span id="currentNum">1</span> / <span id="totalNum">20</span>
          </div>
          <button class="nav-btn" id="nextBtn" onclick="nextChallenge()">‚ñ∂</button>
        </div>
        <div class="action-buttons">
          <button class="btn btn-games" onclick="openGames()">
            Games
          </button>
          <button class="btn btn-help" onclick="askClaude()">
            ü§ñ Help
          </button>
          <button class="btn btn-reset" onclick="resetChallenge()">
            Reset
          </button>
          <button class="btn btn-submit" id="submitBtn" onclick="submitCode()">
            Submit
          </button>
        </div>
      </div>
    </div>

    <div class="main-content">
      <div class="sidebar">
        <h2 id="challengeTitle">Challenge Title</h2>
        <div class="description" id="challengeDescription">
          Loading challenge...
        </div>

        <div class="test-cases">
          <h3>Test Cases:</h3>
          <div id="testCases"></div>
        </div>

        <div class="loading-indicator" id="loadingIndicator" style="display: none;">
          <span>Loading Python runtime...</span>
        </div>
      </div>

      <div class="mobile-action-buttons">
        <button class="btn btn-help" onclick="askClaude()">
          ü§ñ Help
        </button>
        <button class="btn btn-reset" onclick="resetChallenge()">
          Reset
        </button>
        <button class="btn btn-submit" id="submitBtnMobile" onclick="submitCode()">
          Submit
        </button>
      </div>

      <div class="editor-section">
        <div class="editor-tab">
          <span id="fileName">1.py</span>
        </div>
        <div id="editor"></div>
      </div>
    </div>

    <div class="output-section">
      <div class="output-header">Output</div>
      <div class="output-content" id="output"></div>
      <div class="test-results" id="testResults"></div>
    </div>
  </div>

  <!-- Games Modal -->
  <div id="gamesModal" class="games-modal" style="display: none;">
    <div class="games-container">
      <div class="games-header">
        <h2>üéÆ Games</h2>
        <button class="close-btn" onclick="closeGames()">‚úï</button>
      </div>
      <div class="games-menu" id="gamesMenu">
        <button class="game-btn" onclick="startGame('snake')">
          <div class="game-icon">üêç</div>
          <div class="game-name">Snake</div>
        </button>
        <button class="game-btn" onclick="startGame('tetris')">
          <div class="game-icon">üß±</div>
          <div class="game-name">Tetris</div>
        </button>
        <button class="game-btn" onclick="startGame('breakout')">
          <div class="game-icon">üéØ</div>
          <div class="game-name">Breakout</div>
        </button>
        <button class="game-btn" onclick="startGame('memory')">
          <div class="game-icon">üÉè</div>
          <div class="game-name">Memory</div>
        </button>
        <button class="game-btn" onclick="startGame('spaceshooter')">
          <div class="game-icon">üöÄ</div>
          <div class="game-name">Space Shooter</div>
        </button>
      </div>
      <div class="game-area" id="gameArea" style="display: none;">
        <div class="game-controls">
          <button class="btn btn-back" onclick="backToMenu()">‚Üê Back</button>
          <div id="gameScore">Score: 0</div>
        </div>
        <canvas id="gameCanvas"></canvas>
        <div id="gameInstructions"></div>
        <div class="mobile-game-controls" id="mobileControls" style="display: none;">
          <div class="control-row">
            <button class="control-btn" onclick="handleMobileControl('up')">‚ñ≤</button>
          </div>
          <div class="control-row">
            <button class="control-btn" onclick="handleMobileControl('left')">‚óÄ</button>
            <button class="control-btn" onclick="handleMobileControl('rotate')">‚Üª</button>
            <button class="control-btn" onclick="handleMobileControl('right')">‚ñ∂</button>
          </div>
          <div class="control-row">
            <button class="control-btn" onclick="handleMobileControl('down')">‚ñº</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Game Over Overlay -->
  <div id="gameOverOverlay" class="game-over-overlay" style="display: none;">
    <div class="game-over-box">
      <div class="game-over-title" id="gameOverTitle">Game Over!</div>
      <div class="game-over-message" id="gameOverMessage">Final Score: 0</div>
      <div class="game-over-buttons">
        <button class="btn btn-restart" onclick="restartGame()">Play Again</button>
        <button class="btn btn-menu" onclick="backToCoding()" id="backToCodeBtn">Back to Coding</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.53.0/min/vs/loader.js"></script>
  <script src="https://cdn.jsdelivr.net/pyodide/v0.28.3/full/pyodide.js"></script>

  <script>
    // Storage API fallback using localStorage
    window.storage = {
      get: function(key) {
        return new Promise(function(resolve, reject) {
          try {
            const value = localStorage.getItem(key);
            resolve(value ? { value: value } : null);
          } catch (error) {
            reject(error);
          }
        });
      },
      set: function(key, value, encrypt) {
        return new Promise(function(resolve, reject) {
          try {
            localStorage.setItem(key, value);
            resolve();
          } catch (error) {
            reject(error);
          }
        });
      },
      delete: function(key, encrypt) {
        return new Promise(function(resolve, reject) {
          try {
            localStorage.removeItem(key);
            resolve();
          } catch (error) {
            reject(error);
          }
        });
      }
    };

    var CHALLENGES = [
      {
        id: 1,
        title: "Add Two Numbers",
        category: "math",
        tags: ["basics", "arithmetic"],
        difficulty: 0,
        description: "Write a function that adds two numbers together.",
        starterCode: "def add(a, b):\n    pass",
        tests: [
          { input: [2, 3], expected: 5 },
          { input: [0, 0], expected: 0 },
          { input: [-1, 1], expected: 0 },
          { input: [100, 200], expected: 300 }
        ]
      },
      {
        id: 2,
        title: "Reverse a String",
        category: "string",
        tags: ["basics", "string-manipulation"],
        difficulty: 1,
        description: "Write a function that reverses a string.",
        starterCode: "def reverse_string(s):\n    pass",
        tests: [
          { input: ["hello"], expected: "olleh" },
          { input: [""], expected: "" },
          { input: ["a"], expected: "a" },
          { input: ["Python"], expected: "nohtyP" }
        ]
      },
      {
        id: 3,
        title: "Find Maximum",
        category: "array",
        tags: ["basics", "iteration"],
        difficulty: 1,
        description: "Write a function that finds the maximum number in a list.",
        starterCode: "def find_max(numbers):\n    pass",
        tests: [
          { input: [[1, 2, 3, 4, 5]], expected: 5 },
          { input: [[-1, -2, -3]], expected: -1 },
          { input: [[42]], expected: 42 },
          { input: [[3, 7, 2, 9, 1]], expected: 9 }
        ]
      },
      {
        id: 4,
        title: "Count Vowels",
        category: "string",
        tags: ["basics", "counting", "iteration"],
        difficulty: 1,
        description: "Write a function that counts the number of vowels in a string.",
        starterCode: "def count_vowels(s):\n    pass",
        tests: [
          { input: ["hello"], expected: 2 },
          { input: ["aeiou"], expected: 5 },
          { input: ["xyz"], expected: 0 },
          { input: ["Programming"], expected: 3 }
        ]
      },
      {
        id: 5,
        title: "Is Palindrome",
        category: "string",
        tags: ["basics", "two-pointer", "string-manipulation"],
        difficulty: 2,
        description: "Write a function that checks if a string is a palindrome.",
        starterCode: "def is_palindrome(s):\n    pass",
        tests: [
          { input: ["racecar"], expected: true },
          { input: ["hello"], expected: false },
          { input: ["a"], expected: true },
          { input: ["madam"], expected: true }
        ]
      },
      {
        id: 6,
        title: "Factorial",
        category: "math",
        tags: ["recursion", "iteration", "math"],
        difficulty: 2,
        description: "Write a function that calculates the factorial of a number.",
        starterCode: "def factorial(n):\n    pass",
        tests: [
          { input: [5], expected: 120 },
          { input: [0], expected: 1 },
          { input: [1], expected: 1 },
          { input: [4], expected: 24 }
        ]
      },
      {
        id: 7,
        title: "Remove Duplicates",
        category: "array",
        tags: ["array", "hashmap", "order-preservation"],
        difficulty: 2,
        description: "Write a function that removes duplicates from a list while preserving order.",
        starterCode: "def remove_duplicates(lst):\n    pass",
        tests: [
          { input: [[1, 2, 2, 3, 4, 4, 5]], expected: [1, 2, 3, 4, 5] },
          { input: [[1, 1, 1]], expected: [1] },
          { input: [[]], expected: [] },
          { input: [["a", "b", "a", "c"]], expected: ["a", "b", "c"] }
        ]
      },
      {
        id: 8,
        title: "FizzBuzz",
        category: "algorithm",
        tags: ["iteration", "conditionals", "modulo"],
        difficulty: 2,
        description: "Return a list of numbers from 1 to n, replacing multiples of 3 with 'Fizz', multiples of 5 with 'Buzz', and multiples of both with 'FizzBuzz'.",
        starterCode: "def fizzbuzz(n):\n    pass",
        tests: [
          { input: [15], expected: [1, 2, "Fizz", 4, "Buzz", "Fizz", 7, 8, "Fizz", "Buzz", 11, "Fizz", 13, 14, "FizzBuzz"] },
          { input: [5], expected: [1, 2, "Fizz", 4, "Buzz"] },
          { input: [3], expected: [1, 2, "Fizz"] }
        ]
      },
      {
        id: 9,
        title: "Sum of Digits",
        category: "math",
        tags: ["math", "string-manipulation", "iteration"],
        difficulty: 2,
        description: "Write a function that returns the sum of all digits in a number.",
        starterCode: "def sum_of_digits(n):\n    pass",
        tests: [
          { input: [123], expected: 6 },
          { input: [0], expected: 0 },
          { input: [9999], expected: 36 },
          { input: [100], expected: 1 }
        ]
      },
      {
        id: 10,
        title: "Is Prime",
        category: "math",
        tags: ["math", "optimization", "iteration"],
        difficulty: 3,
        description: "Write a function that checks if a number is prime.",
        starterCode: "def is_prime(n):\n    pass",
        tests: [
          { input: [7], expected: true },
          { input: [4], expected: false },
          { input: [2], expected: true },
          { input: [1], expected: false },
          { input: [17], expected: true }
        ]
      },
      {
        id: 11,
        title: "Merge Sorted Lists",
        category: "array",
        tags: ["array", "two-pointer", "sorting", "merge"],
        difficulty: 3,
        description: "Write a function that merges two sorted lists into one sorted list.",
        starterCode: "def merge_sorted(list1, list2):\n    pass",
        tests: [
          { input: [[1, 3, 5], [2, 4, 6]], expected: [1, 2, 3, 4, 5, 6] },
          { input: [[1, 2], [3, 4]], expected: [1, 2, 3, 4] },
          { input: [[], [1, 2]], expected: [1, 2] },
          { input: [[5], [1, 2, 3]], expected: [1, 2, 3, 5] }
        ]
      },
      {
        id: 12,
        title: "Count Word Frequency",
        category: "string",
        tags: ["hashmap", "string", "counting"],
        difficulty: 3,
        description: "Write a function that counts the frequency of each word in a string.",
        starterCode: "def word_frequency(text):\n    pass",
        tests: [
          { input: ["hello world hello"], expected: {"hello": 2, "world": 1} },
          { input: ["the quick brown fox"], expected: {"the": 1, "quick": 1, "brown": 1, "fox": 1} },
          { input: [""], expected: {} }
        ]
      },
      {
        id: 13,
        title: "Longest Word",
        category: "string",
        tags: ["string", "iteration", "comparison"],
        difficulty: 2,
        description: "Write a function that finds the longest word in a sentence.",
        starterCode: "def longest_word(sentence):\n    pass",
        tests: [
          { input: ["the quick brown fox"], expected: "quick" },
          { input: ["hello world"], expected: "hello" },
          { input: ["Python programming is fun"], expected: "programming" }
        ]
      },
      {
        id: 14,
        title: "Binary to Decimal",
        category: "math",
        tags: ["math", "conversion", "binary"],
        difficulty: 3,
        description: "Write a function that converts a binary string to decimal.",
        starterCode: "def binary_to_decimal(binary_str):\n    pass",
        tests: [
          { input: ["101"], expected: 5 },
          { input: ["1010"], expected: 10 },
          { input: ["1111"], expected: 15 },
          { input: ["10000"], expected: 16 }
        ]
      },
      {
        id: 15,
        title: "Two Sum",
        category: "array",
        tags: ["array", "hashmap", "optimization"],
        difficulty: 4,
        description: "Given a list of numbers and a target, return indices of two numbers that add up to the target.",
        starterCode: "def two_sum(nums, target):\n    pass",
        tests: [
          { input: [[2, 7, 11, 15], 9], expected: [0, 1] },
          { input: [[3, 2, 4], 6], expected: [1, 2] },
          { input: [[3, 3], 6], expected: [0, 1] }
        ]
      },
      {
        id: 16,
        title: "Anagram Check",
        category: "string",
        tags: ["string", "hashmap", "sorting"],
        difficulty: 3,
        description: "Write a function that checks if two strings are anagrams.",
        starterCode: "def are_anagrams(str1, str2):\n    pass",
        tests: [
          { input: ["listen", "silent"], expected: true },
          { input: ["hello", "world"], expected: false },
          { input: ["anagram", "nagaram"], expected: true },
          { input: ["rat", "car"], expected: false }
        ]
      },
      {
        id: 17,
        title: "Fibonacci Sequence",
        category: "math",
        tags: ["recursion", "dynamic-programming", "math"],
        difficulty: 3,
        description: "Write a function that returns the nth Fibonacci number.",
        starterCode: "def fibonacci(n):\n    pass",
        tests: [
          { input: [0], expected: 0 },
          { input: [1], expected: 1 },
          { input: [5], expected: 5 },
          { input: [10], expected: 55 }
        ]
      },
      {
        id: 18,
        title: "Rotate Array",
        category: "array",
        tags: ["array", "manipulation", "modulo"],
        difficulty: 4,
        description: "Write a function that rotates an array to the right by k steps.",
        starterCode: "def rotate_array(arr, k):\n    pass",
        tests: [
          { input: [[1, 2, 3, 4, 5], 2], expected: [4, 5, 1, 2, 3] },
          { input: [[1, 2], 3], expected: [2, 1] },
          { input: [[1, 2, 3], 0], expected: [1, 2, 3] }
        ]
      },
      {
        id: 19,
        title: "Valid Parentheses",
        category: "stack",
        tags: ["stack", "string", "matching"],
        difficulty: 4,
        description: "Write a function that checks if a string of parentheses is valid.",
        starterCode: "def valid_parentheses(s):\n    pass",
        tests: [
          { input: ["()"], expected: true },
          { input: ["()[]{}"], expected: true },
          { input: ["(]"], expected: false },
          { input: ["([)]"], expected: false },
          { input: ["{[]}"], expected: true }
        ]
      },
      {
        id: 20,
        title: "Longest Common Prefix",
        category: "string",
        tags: ["string", "comparison", "iteration"],
        difficulty: 3,
        description: "Write a function that finds the longest common prefix among an array of strings.",
        starterCode: "def longest_common_prefix(strs):\n    pass",
        tests: [
          { input: [["flower", "flow", "flight"]], expected: "fl" },
          { input: [["dog", "racecar", "car"]], expected: "" },
          { input: [["interspecies", "interstellar", "interstate"]], expected: "inters" }
        ]
      },
      {
        id: 21,
        title: "Remove Vowels",
        category: "string",
        tags: ["string", "filtering", "iteration"],
        difficulty: 2,
        description: "Write a function that removes all vowels from a string.",
        starterCode: "def remove_vowels(s):\n    pass",
        tests: [
          { input: ["hello"], expected: "hll" },
          { input: ["programming"], expected: "prgrmmng" },
          { input: ["aeiou"], expected: "" },
          { input: ["xyz"], expected: "xyz" }
        ]
      },
      {
        id: 22,
        title: "Title Case",
        category: "string",
        tags: ["string", "string-manipulation", "formatting"],
        difficulty: 2,
        description: "Write a function that converts a string to title case (first letter of each word capitalized).",
        starterCode: "def title_case(s):\n    pass",
        tests: [
          { input: ["hello world"], expected: "Hello World" },
          { input: ["the quick brown fox"], expected: "The Quick Brown Fox" },
          { input: ["python"], expected: "Python" },
          { input: [""], expected: "" }
        ]
      },
      {
        id: 23,
        title: "Find Second Largest",
        category: "array",
        tags: ["array", "sorting", "comparison"],
        difficulty: 3,
        description: "Write a function that finds the second largest number in a list.",
        starterCode: "def second_largest(numbers):\n    pass",
        tests: [
          { input: [[1, 2, 3, 4, 5]], expected: 4 },
          { input: [[10, 5, 8, 12, 3]], expected: 10 },
          { input: [[7, 7, 7, 1]], expected: 1 },
          { input: [[5, 5]], expected: 5 }
        ]
      },
      {
        id: 24,
        title: "Flatten List",
        category: "array",
        tags: ["array", "iteration", "nested-structures"],
        difficulty: 2,
        description: "Write a function that flattens a nested list (one level deep).",
        starterCode: "def flatten(lst):\n    pass",
        tests: [
          { input: [[[1, 2], [3, 4], [5]]], expected: [1, 2, 3, 4, 5] },
          { input: [[[1], [2], [3]]], expected: [1, 2, 3] },
          { input: [[[]]], expected: [] },
          { input: [[[1, 2, 3]]], expected: [1, 2, 3] }
        ]
      },
      {
        id: 25,
        title: "Reverse Words",
        category: "string",
        tags: ["string", "array", "manipulation"],
        difficulty: 2,
        description: "Write a function that reverses the order of words in a sentence.",
        starterCode: "def reverse_words(sentence):\n    pass",
        tests: [
          { input: ["hello world"], expected: "world hello" },
          { input: ["the quick brown fox"], expected: "fox brown quick the" },
          { input: ["python"], expected: "python" },
          { input: [""], expected: "" }
        ]
      },
      {
        id: 26,
        title: "Is Leap Year",
        category: "math",
        tags: ["math", "conditionals", "date"],
        difficulty: 2,
        description: "Write a function that checks if a year is a leap year.",
        starterCode: "def is_leap_year(year):\n    pass",
        tests: [
          { input: [2020], expected: true },
          { input: [2021], expected: false },
          { input: [2000], expected: true },
          { input: [1900], expected: false },
          { input: [2024], expected: true }
        ]
      },
      {
        id: 27,
        title: "Find Missing Number",
        category: "array",
        tags: ["array", "math", "bit-manipulation"],
        difficulty: 4,
        description: "Given a list containing n-1 numbers from 0 to n, find the missing number.",
        starterCode: "def find_missing(numbers):\n    pass",
        tests: [
          { input: [[0, 1, 3]], expected: 2 },
          { input: [[0, 1, 2, 3, 4, 6]], expected: 5 },
          { input: [[1]], expected: 0 },
          { input: [[0]], expected: 1 }
        ]
      },
      {
        id: 28,
        title: "Compress String",
        category: "string",
        tags: ["string", "iteration", "counting"],
        difficulty: 3,
        description: "Write a function that compresses a string by counting consecutive characters (e.g., 'aaabbc' -> 'a3b2c1').",
        starterCode: "def compress_string(s):\n    pass",
        tests: [
          { input: ["aaabbc"], expected: "a3b2c1" },
          { input: ["abc"], expected: "a1b1c1" },
          { input: ["aaa"], expected: "a3" },
          { input: [""], expected: "" }
        ]
      },
      {
        id: 29,
        title: "Move Zeros",
        category: "array",
        tags: ["array", "two-pointer", "in-place"],
        difficulty: 3,
        description: "Write a function that moves all zeros in a list to the end while maintaining the order of other elements.",
        starterCode: "def move_zeros(numbers):\n    pass",
        tests: [
          { input: [[0, 1, 0, 3, 12]], expected: [1, 3, 12, 0, 0] },
          { input: [[1, 2, 3]], expected: [1, 2, 3] },
          { input: [[0, 0, 1]], expected: [1, 0, 0] },
          { input: [[0]], expected: [0] }
        ]
      },
      {
        id: 30,
        title: "Find Intersection",
        category: "array",
        tags: ["array", "hashmap", "set-operations"],
        difficulty: 3,
        description: "Write a function that finds the intersection of two lists (common elements).",
        starterCode: "def intersection(list1, list2):\n    pass",
        tests: [
          { input: [[1, 2, 3], [2, 3, 4]], expected: [2, 3] },
          { input: [[1, 1, 2], [1, 3]], expected: [1] },
          { input: [[1, 2, 3], [4, 5, 6]], expected: [] },
          { input: [[], [1, 2]], expected: [] }
        ]
      },
      {
        id: 31,
        title: "Is Power of Two",
        category: "math",
        tags: ["math", "bit-manipulation", "optimization"],
        difficulty: 3,
        description: "Write a function that checks if a number is a power of two.",
        starterCode: "def is_power_of_two(n):\n    pass",
        tests: [
          { input: [16], expected: true },
          { input: [18], expected: false },
          { input: [1], expected: true },
          { input: [0], expected: false },
          { input: [64], expected: true }
        ]
      },
      {
        id: 32,
        title: "Chunk Array",
        category: "array",
        tags: ["array", "slicing", "iteration"],
        difficulty: 3,
        description: "Write a function that splits a list into chunks of a given size.",
        starterCode: "def chunk_array(lst, size):\n    pass",
        tests: [
          { input: [[1, 2, 3, 4, 5], 2], expected: [[1, 2], [3, 4], [5]] },
          { input: [[1, 2, 3, 4], 2], expected: [[1, 2], [3, 4]] },
          { input: [[1, 2, 3], 5], expected: [[1, 2, 3]] },
          { input: [[], 2], expected: [] }
        ]
      },
      {
        id: 33,
        title: "First Non-Repeating Character",
        category: "string",
        tags: ["string", "hashmap", "counting"],
        difficulty: 4,
        description: "Write a function that finds the first non-repeating character in a string.",
        starterCode: "def first_unique_char(s):\n    pass",
        tests: [
          { input: ["leetcode"], expected: "l" },
          { input: ["loveleetcode"], expected: "v" },
          { input: ["aabb"], expected: "" },
          { input: [""], expected: "" }
        ]
      },
      {
        id: 34,
        title: "Greatest Common Divisor",
        category: "math",
        tags: ["math", "recursion", "euclidean-algorithm"],
        difficulty: 4,
        description: "Write a function that finds the GCD (greatest common divisor) of two numbers.",
        starterCode: "def gcd(a, b):\n    pass",
        tests: [
          { input: [12, 8], expected: 4 },
          { input: [17, 5], expected: 1 },
          { input: [100, 50], expected: 50 },
          { input: [7, 7], expected: 7 }
        ]
      },
      {
        id: 35,
        title: "Remove Duplicates Sorted",
        category: "array",
        tags: ["array", "two-pointer", "in-place"],
        difficulty: 3,
        description: "Write a function that removes duplicates from a sorted list and returns the length of unique elements.",
        starterCode: "def remove_duplicates_sorted(numbers):\n    pass",
        tests: [
          { input: [[1, 1, 2, 2, 3]], expected: 3 },
          { input: [[1, 2, 3]], expected: 3 },
          { input: [[1, 1, 1]], expected: 1 },
          { input: [[]], expected: 0 }
        ]
      },
      {
        id: 36,
        title: "Pascal's Triangle Row",
        category: "math",
        tags: ["math", "dynamic-programming", "combinatorics"],
        difficulty: 4,
        description: "Write a function that returns the nth row of Pascal's triangle (0-indexed).",
        starterCode: "def pascal_row(n):\n    pass",
        tests: [
          { input: [0], expected: [1] },
          { input: [1], expected: [1, 1] },
          { input: [2], expected: [1, 2, 1] },
          { input: [3], expected: [1, 3, 3, 1] },
          { input: [4], expected: [1, 4, 6, 4, 1] }
        ]
      },
      {
        id: 37,
        title: "String Rotation",
        category: "string",
        tags: ["string", "string-manipulation", "pattern-matching"],
        difficulty: 4,
        description: "Write a function that checks if one string is a rotation of another.",
        starterCode: "def is_rotation(s1, s2):\n    pass",
        tests: [
          { input: ["waterbottle", "erbottlewat"], expected: true },
          { input: ["hello", "llohe"], expected: true },
          { input: ["hello", "world"], expected: false },
          { input: ["abc", "bca"], expected: true }
        ]
      },
      {
        id: 38,
        title: "Find Peak Element",
        category: "array",
        tags: ["array", "binary-search", "optimization"],
        difficulty: 5,
        description: "Write a function that finds a peak element in a list (element greater than its neighbors).",
        starterCode: "def find_peak(numbers):\n    pass",
        tests: [
          { input: [[1, 2, 3, 1]], expected: 3 },
          { input: [[1, 2, 1, 3, 5, 6, 4]], expected: 6 },
          { input: [[5]], expected: 5 },
          { input: [[1, 2, 3]], expected: 3 }
        ]
      },
      {
        id: 39,
        title: "Count Consonants",
        category: "string",
        tags: ["string", "counting", "iteration"],
        difficulty: 2,
        description: "Write a function that counts the number of consonants in a string.",
        starterCode: "def count_consonants(s):\n    pass",
        tests: [
          { input: ["hello"], expected: 3 },
          { input: ["programming"], expected: 8 },
          { input: ["aeiou"], expected: 0 },
          { input: ["xyz"], expected: 3 }
        ]
      },
      {
        id: 40,
        title: "Majority Element",
        category: "array",
        tags: ["array", "hashmap", "boyer-moore"],
        difficulty: 4,
        description: "Write a function that finds the majority element (appears more than n/2 times) in a list.",
        starterCode: "def majority_element(numbers):\n    pass",
        tests: [
          { input: [[3, 2, 3]], expected: 3 },
          { input: [[2, 2, 1, 1, 1, 2, 2]], expected: 2 },
          { input: [[1]], expected: 1 },
          { input: [[1, 1, 2]], expected: 1 }
        ]
      },
      {
        id: 41,
        title: "Product Except Self",
        category: "array",
        tags: ["array", "prefix-sum", "optimization"],
        difficulty: 5,
        description: "Write a function that returns a list where each element is the product of all elements except itself.",
        starterCode: "def product_except_self(numbers):\n    pass",
        tests: [
          { input: [[1, 2, 3, 4]], expected: [24, 12, 8, 6] },
          { input: [[2, 3, 4]], expected: [12, 8, 6] },
          { input: [[1, 1]], expected: [1, 1] },
          { input: [[5]], expected: [1] }
        ]
      },
      {
        id: 42,
        title: "Camel Case to Snake Case",
        category: "string",
        tags: ["string", "regex", "formatting"],
        difficulty: 3,
        description: "Write a function that converts a camelCase string to snake_case.",
        starterCode: "def camel_to_snake(s):\n    pass",
        tests: [
          { input: ["camelCase"], expected: "camel_case" },
          { input: ["helloWorld"], expected: "hello_world" },
          { input: ["myVariable"], expected: "my_variable" },
          { input: ["simple"], expected: "simple" }
        ]
      },
      {
        id: 43,
        title: "Find Duplicates",
        category: "array",
        tags: ["array", "hashmap", "set-operations"],
        difficulty: 3,
        description: "Write a function that finds all duplicate elements in a list.",
        starterCode: "def find_duplicates(numbers):\n    pass",
        tests: [
          { input: [[4, 3, 2, 7, 8, 2, 3, 1]], expected: [2, 3] },
          { input: [[1, 1, 2]], expected: [1] },
          { input: [[1, 2, 3]], expected: [] },
          { input: [[1, 1, 1]], expected: [1] }
        ]
      },
      {
        id: 44,
        title: "Is Armstrong Number",
        category: "math",
        tags: ["math", "digit-manipulation"],
        difficulty: 3,
        description: "Write a function that checks if a number is an Armstrong number (sum of cubes of digits equals the number).",
        starterCode: "def is_armstrong(n):\n    pass",
        tests: [
          { input: [153], expected: true },
          { input: [370], expected: true },
          { input: [123], expected: false },
          { input: [9], expected: true }
        ]
      },
      {
        id: 45,
        title: "Longest Substring Without Repeating",
        category: "string",
        tags: ["string", "sliding-window", "hashmap"],
        difficulty: 6,
        description: "Write a function that finds the length of the longest substring without repeating characters.",
        starterCode: "def longest_unique_substring(s):\n    pass",
        tests: [
          { input: ["abcabcbb"], expected: 3 },
          { input: ["bbbbb"], expected: 1 },
          { input: ["pwwkew"], expected: 3 },
          { input: [""], expected: 0 }
        ]
      },
      {
        id: 46,
        title: "Find Union",
        category: "array",
        tags: ["array", "set-operations", "hashmap"],
        difficulty: 2,
        description: "Write a function that finds the union of two lists (all unique elements from both).",
        starterCode: "def union(list1, list2):\n    pass",
        tests: [
          { input: [[1, 2, 3], [3, 4, 5]], expected: [1, 2, 3, 4, 5] },
          { input: [[1, 2], [2, 3]], expected: [1, 2, 3] },
          { input: [[], [1, 2]], expected: [1, 2] },
          { input: [[1, 1], [1, 2]], expected: [1, 2] }
        ]
      },
      {
        id: 47,
        title: "Is Perfect Square",
        category: "math",
        tags: ["math", "binary-search", "sqrt"],
        difficulty: 3,
        description: "Write a function that checks if a number is a perfect square.",
        starterCode: "def is_perfect_square(n):\n    pass",
        tests: [
          { input: [16], expected: true },
          { input: [14], expected: false },
          { input: [1], expected: true },
          { input: [0], expected: true },
          { input: [25], expected: true }
        ]
      },
      {
        id: 48,
        title: "Reverse Integer",
        category: "math",
        tags: ["math", "digit-manipulation"],
        difficulty: 3,
        description: "Write a function that reverses the digits of an integer.",
        starterCode: "def reverse_integer(n):\n    pass",
        tests: [
          { input: [123], expected: 321 },
          { input: [-123], expected: -321 },
          { input: [120], expected: 21 },
          { input: [0], expected: 0 }
        ]
      },
      {
        id: 49,
        title: "Contains Duplicate",
        category: "array",
        tags: ["array", "hashmap", "set-operations"],
        difficulty: 2,
        description: "Write a function that checks if a list contains any duplicate elements.",
        starterCode: "def contains_duplicate(numbers):\n    pass",
        tests: [
          { input: [[1, 2, 3, 1]], expected: true },
          { input: [[1, 2, 3, 4]], expected: false },
          { input: [[1, 1, 1, 3, 3, 4, 3, 2, 4, 2]], expected: true },
          { input: [[]], expected: false }
        ]
      },
      {
        id: 50,
        title: "Happy Number",
        category: "math",
        tags: ["math", "hashmap", "cycle-detection"],
        difficulty: 5,
        description: "Write a function that checks if a number is a happy number (repeatedly sum squares of digits until reaching 1 or a cycle).",
        starterCode: "def is_happy(n):\n    pass",
        tests: [
          { input: [19], expected: true },
          { input: [2], expected: false },
          { input: [1], expected: true },
          { input: [7], expected: true }
        ]
      },
      {
        id: 51,
        title: "Bubble Sort",
        category: "sorting",
        tags: ["sorting", "algorithm", "array"],
        difficulty: 3,
        description: "Write a function that implements bubble sort to sort a list in ascending order.",
        starterCode: "def bubble_sort(arr):\n    pass",
        tests: [
          { input: [[64, 34, 25, 12, 22, 11, 90]], expected: [11, 12, 22, 25, 34, 64, 90] },
          { input: [[5, 1, 4, 2, 8]], expected: [1, 2, 4, 5, 8] },
          { input: [[1, 2, 3]], expected: [1, 2, 3] },
          { input: [[3, 2, 1]], expected: [1, 2, 3] }
        ]
      },
      {
        id: 52,
        title: "Selection Sort",
        category: "sorting",
        tags: ["sorting", "algorithm", "array"],
        difficulty: 3,
        description: "Write a function that implements selection sort to sort a list in ascending order.",
        starterCode: "def selection_sort(arr):\n    pass",
        tests: [
          { input: [[64, 25, 12, 22, 11]], expected: [11, 12, 22, 25, 64] },
          { input: [[5, 3, 8, 1]], expected: [1, 3, 5, 8] },
          { input: [[1]], expected: [1] },
          { input: [[]], expected: [] }
        ]
      },
      {
        id: 53,
        title: "Merge Two Sorted Arrays",
        category: "array",
        tags: ["array", "merging", "two-pointer"],
        difficulty: 3,
        description: "Write a function that merges two sorted arrays without using extra space for one array.",
        starterCode: "def merge_arrays(arr1, arr2):\n    pass",
        tests: [
          { input: [[1, 3, 5, 7], [2, 4, 6, 8]], expected: [1, 2, 3, 4, 5, 6, 7, 8] },
          { input: [[1, 2, 3], [4, 5, 6]], expected: [1, 2, 3, 4, 5, 6] },
          { input: [[], [1, 2, 3]], expected: [1, 2, 3] },
          { input: [[1, 5, 9], [2, 3, 10]], expected: [1, 2, 3, 5, 9, 10] }
        ]
      },
      {
        id: 54,
        title: "Binary Search",
        category: "searching",
        tags: ["searching", "binary-search", "algorithm"],
        difficulty: 4,
        description: "Write a function that implements binary search to find the index of a target in a sorted array. Return -1 if not found.",
        starterCode: "def binary_search(arr, target):\n    pass",
        tests: [
          { input: [[1, 2, 3, 4, 5, 6, 7], 4], expected: 3 },
          { input: [[1, 2, 3, 4, 5], 1], expected: 0 },
          { input: [[1, 2, 3, 4, 5], 5], expected: 4 },
          { input: [[1, 2, 3, 4, 5], 6], expected: -1 }
        ]
      },
      {
        id: 55,
        title: "Group Anagrams",
        category: "string",
        tags: ["string", "hashmap", "sorting"],
        difficulty: 5,
        description: "Write a function that groups anagrams together from a list of strings.",
        starterCode: "def group_anagrams(words):\n    pass",
        tests: [
          { input: [["eat", "tea", "tan", "ate", "nat", "bat"]], expected: [["eat", "tea", "ate"], ["tan", "nat"], ["bat"]] },
          { input: [["a"]], expected: [["a"]] },
          { input: [["", ""]], expected: [["", ""]] }
        ]
      },
      {
        id: 56,
        title: "Insertion Sort",
        category: "sorting",
        tags: ["sorting", "algorithm", "array"],
        difficulty: 3,
        description: "Write a function that implements insertion sort to sort a list in ascending order.",
        starterCode: "def insertion_sort(arr):\n    pass",
        tests: [
          { input: [[12, 11, 13, 5, 6]], expected: [5, 6, 11, 12, 13] },
          { input: [[5, 2, 4, 6, 1, 3]], expected: [1, 2, 3, 4, 5, 6] },
          { input: [[1, 2, 3]], expected: [1, 2, 3] },
          { input: [[]], expected: [] }
        ]
      },
      {
        id: 57,
        title: "Top K Frequent Elements",
        category: "array",
        tags: ["hashmap", "sorting", "frequency"],
        difficulty: 5,
        description: "Write a function that returns the k most frequent elements in a list.",
        starterCode: "def top_k_frequent(nums, k):\n    pass",
        tests: [
          { input: [[1, 1, 1, 2, 2, 3], 2], expected: [1, 2] },
          { input: [[1], 1], expected: [1] },
          { input: [[4, 4, 4, 2, 2, 3], 1], expected: [4] }
        ]
      },
      {
        id: 58,
        title: "Subarray Sum Equals K",
        category: "array",
        tags: ["array", "hashmap", "prefix-sum"],
        difficulty: 5,
        description: "Write a function that counts the number of continuous subarrays whose sum equals k.",
        starterCode: "def subarray_sum(nums, k):\n    pass",
        tests: [
          { input: [[1, 1, 1], 2], expected: 2 },
          { input: [[1, 2, 3], 3], expected: 2 },
          { input: [[1, -1, 0], 0], expected: 3 },
          { input: [[1], 0], expected: 0 }
        ]
      },
      {
        id: 59,
        title: "Longest Consecutive Sequence",
        category: "array",
        tags: ["array", "hashmap", "sequence"],
        difficulty: 6,
        description: "Write a function that finds the length of the longest consecutive sequence in an unsorted array.",
        starterCode: "def longest_consecutive(nums):\n    pass",
        tests: [
          { input: [[100, 4, 200, 1, 3, 2]], expected: 4 },
          { input: [[0, 3, 7, 2, 5, 8, 4, 6, 0, 1]], expected: 9 },
          { input: [[]], expected: 0 },
          { input: [[9, 1, 4, 7, 3]], expected: 2 }
        ]
      },
      {
        id: 60,
        title: "Implement Queue Using Stacks",
        category: "stack",
        tags: ["stack", "queue", "data-structures"],
        difficulty: 5,
        description: "Write a Queue class that implements a queue using two stacks with push and pop methods.",
        starterCode: "class Queue:\n    def __init__(self):\n        pass\n    \n    def push(self, x):\n        pass\n    \n    def pop(self):\n        pass",
        tests: [
          { input: [["push", 1], ["push", 2], ["pop"], ["push", 3], ["pop"]], expected: [null, null, 1, null, 2] }
        ]
      },
      {
        id: 61,
        title: "Valid Sudoku",
        category: "array",
        tags: ["hashmap", "matrix", "validation"],
        difficulty: 6,
        description: "Write a function that checks if a 9x9 Sudoku board is valid (only filled cells need to be validated).",
        starterCode: "def is_valid_sudoku(board):\n    pass",
        tests: [
          { input: [[["5","3",".",".","7",".",".",".","."],["6",".",".","1","9","5",".",".","."],[".","9","8",".",".",".",".","6","."],["8",".",".",".","6",".",".",".","3"],["4",".",".","8",".","3",".",".","1"],["7",".",".",".","2",".",".",".","6"],[".","6",".",".",".",".","2","8","."],[".",".",".","4","1","9",".",".","5"],[".",".",".",".","8",".",".","7","9"]]], expected: true }
        ]
      },
      {
        id: 62,
        title: "Kth Largest Element",
        category: "array",
        tags: ["array", "sorting", "heap"],
        difficulty: 5,
        description: "Write a function that finds the kth largest element in an unsorted array.",
        starterCode: "def find_kth_largest(nums, k):\n    pass",
        tests: [
          { input: [[3, 2, 1, 5, 6, 4], 2], expected: 5 },
          { input: [[3, 2, 3, 1, 2, 4, 5, 5, 6], 4], expected: 4 },
          { input: [[1], 1], expected: 1 },
          { input: [[7, 6, 5, 4, 3, 2, 1], 5], expected: 3 }
        ]
      },
      {
        id: 63,
        title: "Merge Intervals",
        category: "array",
        tags: ["array", "sorting", "intervals"],
        difficulty: 5,
        description: "Write a function that merges overlapping intervals.",
        starterCode: "def merge_intervals(intervals):\n    pass",
        tests: [
          { input: [[[1,3],[2,6],[8,10],[15,18]]], expected: [[1,6],[8,10],[15,18]] },
          { input: [[[1,4],[4,5]]], expected: [[1,5]] },
          { input: [[[1,4],[0,4]]], expected: [[0,4]] },
          { input: [[[1,4]]], expected: [[1,4]] }
        ]
      },
      {
        id: 64,
        title: "Set Bits Count",
        category: "math",
        tags: ["bit-manipulation", "binary"],
        difficulty: 3,
        description: "Write a function that counts the number of 1 bits (set bits) in a number.",
        starterCode: "def count_bits(n):\n    pass",
        tests: [
          { input: [11], expected: 3 },
          { input: [128], expected: 1 },
          { input: [0], expected: 0 },
          { input: [7], expected: 3 }
        ]
      },
      {
        id: 65,
        title: "Single Number",
        category: "array",
        tags: ["array", "bit-manipulation", "hashmap"],
        difficulty: 4,
        description: "Write a function that finds the single number in a list where every other number appears twice.",
        starterCode: "def single_number(nums):\n    pass",
        tests: [
          { input: [[2, 2, 1]], expected: 1 },
          { input: [[4, 1, 2, 1, 2]], expected: 4 },
          { input: [[1]], expected: 1 },
          { input: [[7, 3, 5, 3, 7]], expected: 5 }
        ]
      },
      {
        id: 66,
        title: "Trapping Rain Water",
        category: "array",
        tags: ["array", "two-pointer", "stack"],
        difficulty: 7,
        description: "Write a function that calculates how much rain water can be trapped given an elevation map.",
        starterCode: "def trap_water(heights):\n    pass",
        tests: [
          { input: [[0,1,0,2,1,0,1,3,2,1,2,1]], expected: 6 },
          { input: [[4,2,0,3,2,5]], expected: 9 },
          { input: [[1,2,3,4]], expected: 0 },
          { input: [[3,0,2,0,4]], expected: 7 }
        ]
      },
      {
        id: 67,
        title: "Quick Sort",
        category: "sorting",
        tags: ["sorting", "algorithm", "recursion"],
        difficulty: 6,
        description: "Write a function that implements quick sort to sort a list in ascending order.",
        starterCode: "def quick_sort(arr):\n    pass",
        tests: [
          { input: [[10, 7, 8, 9, 1, 5]], expected: [1, 5, 7, 8, 9, 10] },
          { input: [[3, 6, 8, 10, 1, 2, 1]], expected: [1, 1, 2, 3, 6, 8, 10] },
          { input: [[1, 2, 3]], expected: [1, 2, 3] },
          { input: [[]], expected: [] }
        ]
      },
      {
        id: 68,
        title: "Merge Sort",
        category: "sorting",
        tags: ["sorting", "algorithm", "recursion", "divide-conquer"],
        difficulty: 6,
        description: "Write a function that implements merge sort to sort a list in ascending order.",
        starterCode: "def merge_sort(arr):\n    pass",
        tests: [
          { input: [[12, 11, 13, 5, 6, 7]], expected: [5, 6, 7, 11, 12, 13] },
          { input: [[5, 2, 3, 1]], expected: [1, 2, 3, 5] },
          { input: [[1]], expected: [1] },
          { input: [[3, 2, 1]], expected: [1, 2, 3] }
        ]
      },
      {
        id: 69,
        title: "Minimum Window Substring",
        category: "string",
        tags: ["string", "sliding-window", "hashmap"],
        difficulty: 8,
        description: "Write a function that finds the minimum window substring containing all characters of another string.",
        starterCode: "def min_window(s, t):\n    pass",
        tests: [
          { input: ["ADOBECODEBANC", "ABC"], expected: "BANC" },
          { input: ["a", "a"], expected: "a" },
          { input: ["a", "aa"], expected: "" }
        ]
      },
      {
        id: 70,
        title: "Max Sliding Window",
        category: "array",
        tags: ["array", "sliding-window", "queue"],
        difficulty: 7,
        description: "Write a function that finds the maximum value in each sliding window of size k.",
        starterCode: "def max_sliding_window(nums, k):\n    pass",
        tests: [
          { input: [[1,3,-1,-3,5,3,6,7], 3], expected: [3,3,5,5,6,7] },
          { input: [[1], 1], expected: [1] },
          { input: [[1,-1], 1], expected: [1,-1] }
        ]
      },
      {
        id: 71,
        title: "LRU Cache",
        category: "design",
        tags: ["hashmap", "linked-list", "design"],
        difficulty: 7,
        description: "Design a Least Recently Used (LRU) cache with get and put methods.",
        starterCode: "class LRUCache:\n    def __init__(self, capacity):\n        pass\n    \n    def get(self, key):\n        pass\n    \n    def put(self, key, value):\n        pass",
        tests: [
          { input: [[2], ["put", 1, 1], ["put", 2, 2], ["get", 1], ["put", 3, 3], ["get", 2]], expected: [null, null, null, 1, null, -1] }
        ]
      },
      {
        id: 72,
        title: "Course Schedule",
        category: "graph",
        tags: ["graph", "topological-sort", "dfs"],
        difficulty: 6,
        description: "Write a function that checks if you can finish all courses given prerequisites (detect cycle in directed graph).",
        starterCode: "def can_finish(num_courses, prerequisites):\n    pass",
        tests: [
          { input: [2, [[1,0]]], expected: true },
          { input: [2, [[1,0],[0,1]]], expected: false },
          { input: [3, [[1,0],[2,1]]], expected: true },
          { input: [1, []], expected: true }
        ]
      },
      {
        id: 73,
        title: "Number of Islands",
        category: "graph",
        tags: ["graph", "dfs", "bfs", "matrix"],
        difficulty: 6,
        description: "Write a function that counts the number of islands in a 2D grid (1 = land, 0 = water).",
        starterCode: "def num_islands(grid):\n    pass",
        tests: [
          { input: [[["1","1","0","0","0"],["1","1","0","0","0"],["0","0","1","0","0"],["0","0","0","1","1"]]], expected: 3 },
          { input: [[["1","1","1"],["0","1","0"],["1","1","1"]]], expected: 1 }
        ]
      },
      {
        id: 74,
        title: "Word Search",
        category: "backtracking",
        tags: ["backtracking", "dfs", "matrix"],
        difficulty: 7,
        description: "Write a function that checks if a word exists in a 2D board by connecting adjacent cells.",
        starterCode: "def exist(board, word):\n    pass",
        tests: [
          { input: [[["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], "ABCCED"], expected: true },
          { input: [[["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], "SEE"], expected: true },
          { input: [[["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], "ABCB"], expected: false }
        ]
      },
      {
        id: 75,
        title: "Permutations",
        category: "backtracking",
        tags: ["backtracking", "recursion", "array"],
        difficulty: 5,
        description: "Write a function that returns all possible permutations of a list of numbers.",
        starterCode: "def permutations(nums):\n    pass",
        tests: [
          { input: [[1,2,3]], expected: [[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]] },
          { input: [[1,2]], expected: [[1,2],[2,1]] },
          { input: [[1]], expected: [[1]] }
        ]
      },
      {
        id: 76,
        title: "Combination Sum",
        category: "backtracking",
        tags: ["backtracking", "recursion", "array"],
        difficulty: 6,
        description: "Write a function that finds all unique combinations that sum to a target (numbers can be reused).",
        starterCode: "def combination_sum(candidates, target):\n    pass",
        tests: [
          { input: [[2,3,6,7], 7], expected: [[2,2,3],[7]] },
          { input: [[2,3,5], 8], expected: [[2,2,2,2],[2,3,3],[3,5]] },
          { input: [[2], 1], expected: [] }
        ]
      },
      {
        id: 77,
        title: "Generate Parentheses",
        category: "backtracking",
        tags: ["backtracking", "string", "recursion"],
        difficulty: 6,
        description: "Write a function that generates all valid combinations of n pairs of parentheses.",
        starterCode: "def generate_parentheses(n):\n    pass",
        tests: [
          { input: [3], expected: ["((()))","(()())","(())()","()(())","()()()"] },
          { input: [1], expected: ["()"] },
          { input: [2], expected: ["(())","()()"] }
        ]
      },
      {
        id: 78,
        title: "Coin Change",
        category: "dynamic-programming",
        tags: ["dynamic-programming", "array", "optimization"],
        difficulty: 6,
        description: "Write a function that finds the minimum number of coins needed to make a given amount.",
        starterCode: "def coin_change(coins, amount):\n    pass",
        tests: [
          { input: [[1,2,5], 11], expected: 3 },
          { input: [[2], 3], expected: -1 },
          { input: [[1], 0], expected: 0 },
          { input: [[1,2,5], 100], expected: 20 }
        ]
      },
      {
        id: 79,
        title: "Longest Increasing Subsequence",
        category: "dynamic-programming",
        tags: ["dynamic-programming", "array", "binary-search"],
        difficulty: 6,
        description: "Write a function that finds the length of the longest increasing subsequence in an array.",
        starterCode: "def length_of_lis(nums):\n    pass",
        tests: [
          { input: [[10,9,2,5,3,7,101,18]], expected: 4 },
          { input: [[0,1,0,3,2,3]], expected: 4 },
          { input: [[7,7,7,7,7,7,7]], expected: 1 },
          { input: [[1,3,6,7,9,4,10,5,6]], expected: 6 }
        ]
      },
      {
        id: 80,
        title: "House Robber",
        category: "dynamic-programming",
        tags: ["dynamic-programming", "array"],
        difficulty: 5,
        description: "Write a function that finds the maximum money you can rob from houses without robbing adjacent ones.",
        starterCode: "def rob(nums):\n    pass",
        tests: [
          { input: [[1,2,3,1]], expected: 4 },
          { input: [[2,7,9,3,1]], expected: 12 },
          { input: [[2,1,1,2]], expected: 4 },
          { input: [[5]], expected: 5 }
        ]
      },
      {
        id: 81,
        title: "Climbing Stairs",
        category: "dynamic-programming",
        tags: ["dynamic-programming", "fibonacci", "math"],
        difficulty: 4,
        description: "Write a function that calculates how many distinct ways you can climb n stairs (1 or 2 steps at a time).",
        starterCode: "def climb_stairs(n):\n    pass",
        tests: [
          { input: [2], expected: 2 },
          { input: [3], expected: 3 },
          { input: [4], expected: 5 },
          { input: [5], expected: 8 }
        ]
      },
      {
        id: 82,
        title: "Decode Ways",
        category: "dynamic-programming",
        tags: ["dynamic-programming", "string", "recursion"],
        difficulty: 6,
        description: "Write a function that counts how many ways a numeric string can be decoded (A=1, B=2, ..., Z=26).",
        starterCode: "def num_decodings(s):\n    pass",
        tests: [
          { input: ["12"], expected: 2 },
          { input: ["226"], expected: 3 },
          { input: ["06"], expected: 0 },
          { input: ["10"], expected: 1 }
        ]
      },
      {
        id: 83,
        title: "Word Break",
        category: "dynamic-programming",
        tags: ["dynamic-programming", "string", "hashmap"],
        difficulty: 6,
        description: "Write a function that checks if a string can be segmented into words from a dictionary.",
        starterCode: "def word_break(s, word_dict):\n    pass",
        tests: [
          { input: ["leetcode", ["leet","code"]], expected: true },
          { input: ["applepenapple", ["apple","pen"]], expected: true },
          { input: ["catsandog", ["cats","dog","sand","and","cat"]], expected: false }
        ]
      },
      {
        id: 84,
        title: "Unique Paths",
        category: "dynamic-programming",
        tags: ["dynamic-programming", "grid", "math"],
        difficulty: 5,
        description: "Write a function that counts unique paths from top-left to bottom-right in an m√ón grid (only right and down moves).",
        starterCode: "def unique_paths(m, n):\n    pass",
        tests: [
          { input: [3, 7], expected: 28 },
          { input: [3, 2], expected: 3 },
          { input: [1, 1], expected: 1 },
          { input: [3, 3], expected: 6 }
        ]
      },
      {
        id: 85,
        title: "Jump Game",
        category: "greedy",
        tags: ["greedy", "array", "dynamic-programming"],
        difficulty: 5,
        description: "Write a function that checks if you can jump from the first to last index (each element is max jump length).",
        starterCode: "def can_jump(nums):\n    pass",
        tests: [
          { input: [[2,3,1,1,4]], expected: true },
          { input: [[3,2,1,0,4]], expected: false },
          { input: [[0]], expected: true },
          { input: [[2,0,0]], expected: true }
        ]
      },
      {
        id: 86,
        title: "Container With Most Water",
        category: "array",
        tags: ["array", "two-pointer", "greedy"],
        difficulty: 5,
        description: "Write a function that finds two lines that form a container holding the most water.",
        starterCode: "def max_area(heights):\n    pass",
        tests: [
          { input: [[1,8,6,2,5,4,8,3,7]], expected: 49 },
          { input: [[1,1]], expected: 1 },
          { input: [[4,3,2,1,4]], expected: 16 },
          { input: [[1,2,1]], expected: 2 }
        ]
      },
      {
        id: 87,
        title: "3Sum",
        category: "array",
        tags: ["array", "two-pointer", "sorting"],
        difficulty: 6,
        description: "Write a function that finds all unique triplets that sum to zero.",
        starterCode: "def three_sum(nums):\n    pass",
        tests: [
          { input: [[-1,0,1,2,-1,-4]], expected: [[-1,-1,2],[-1,0,1]] },
          { input: [[]], expected: [] },
          { input: [[0]], expected: [] },
          { input: [[0,0,0]], expected: [[0,0,0]] }
        ]
      },
      {
        id: 88,
        title: "Letter Combinations",
        category: "backtracking",
        tags: ["backtracking", "string", "recursion"],
        difficulty: 5,
        description: "Write a function that returns all letter combinations of a phone number (2-9).",
        starterCode: "def letter_combinations(digits):\n    pass",
        tests: [
          { input: ["23"], expected: ["ad","ae","af","bd","be","bf","cd","ce","cf"] },
          { input: [""], expected: [] },
          { input: ["2"], expected: ["a","b","c"] }
        ]
      },
      {
        id: 89,
        title: "Sort Colors",
        category: "sorting",
        tags: ["sorting", "array", "two-pointer"],
        difficulty: 4,
        description: "Write a function that sorts an array with values 0, 1, and 2 in-place (Dutch National Flag problem).",
        starterCode: "def sort_colors(nums):\n    pass",
        tests: [
          { input: [[2,0,2,1,1,0]], expected: [0,0,1,1,2,2] },
          { input: [[2,0,1]], expected: [0,1,2] },
          { input: [[0]], expected: [0] },
          { input: [[1,2,0]], expected: [0,1,2] }
        ]
      },
      {
        id: 90,
        title: "Search in Rotated Array",
        category: "searching",
        tags: ["binary-search", "array", "algorithm"],
        difficulty: 6,
        description: "Write a function that searches for a target in a rotated sorted array.",
        starterCode: "def search_rotated(nums, target):\n    pass",
        tests: [
          { input: [[4,5,6,7,0,1,2], 0], expected: 4 },
          { input: [[4,5,6,7,0,1,2], 3], expected: -1 },
          { input: [[1], 0], expected: -1 },
          { input: [[1,3], 3], expected: 1 }
        ]
      },
      {
        id: 91,
        title: "Find Median of Two Sorted Arrays",
        category: "array",
        tags: ["binary-search", "array", "divide-conquer"],
        difficulty: 8,
        description: "Write a function that finds the median of two sorted arrays.",
        starterCode: "def find_median_sorted_arrays(nums1, nums2):\n    pass",
        tests: [
          { input: [[1,3], [2]], expected: 2.0 },
          { input: [[1,2], [3,4]], expected: 2.5 },
          { input: [[0,0], [0,0]], expected: 0.0 },
          { input: [[], [1]], expected: 1.0 }
        ]
      },
      {
        id: 92,
        title: "Spiral Matrix",
        category: "matrix",
        tags: ["matrix", "array", "simulation"],
        difficulty: 5,
        description: "Write a function that returns all elements of a matrix in spiral order.",
        starterCode: "def spiral_order(matrix):\n    pass",
        tests: [
          { input: [[[1,2,3],[4,5,6],[7,8,9]]], expected: [1,2,3,6,9,8,7,4,5] },
          { input: [[[1,2,3,4],[5,6,7,8],[9,10,11,12]]], expected: [1,2,3,4,8,12,11,10,9,5,6,7] }
        ]
      },
      {
        id: 93,
        title: "Rotate Matrix",
        category: "matrix",
        tags: ["matrix", "array", "in-place"],
        difficulty: 5,
        description: "Write a function that rotates a square matrix 90 degrees clockwise in-place.",
        starterCode: "def rotate_matrix(matrix):\n    pass",
        tests: [
          { input: [[[1,2,3],[4,5,6],[7,8,9]]], expected: [[7,4,1],[8,5,2],[9,6,3]] },
          { input: [[[5,1,9,11],[2,4,8,10],[13,3,6,7],[15,14,12,16]]], expected: [[15,13,2,5],[14,3,4,1],[12,6,8,9],[16,7,10,11]] }
        ]
      },
      {
        id: 94,
        title: "Pow(x, n)",
        category: "math",
        tags: ["math", "recursion", "binary-exponentiation"],
        difficulty: 5,
        description: "Write a function that calculates x raised to the power n (x^n).",
        starterCode: "def my_pow(x, n):\n    pass",
        tests: [
          { input: [2.0, 10], expected: 1024.0 },
          { input: [2.1, 3], expected: 9.261 },
          { input: [2.0, -2], expected: 0.25 },
          { input: [1.0, 2147483647], expected: 1.0 }
        ]
      },
      {
        id: 95,
        title: "Find All Duplicates",
        category: "array",
        tags: ["array", "hashmap", "in-place"],
        difficulty: 5,
        description: "Write a function that finds all elements that appear twice in an array (1 ‚â§ a[i] ‚â§ n).",
        starterCode: "def find_all_duplicates(nums):\n    pass",
        tests: [
          { input: [[4,3,2,7,8,2,3,1]], expected: [2,3] },
          { input: [[1,1,2]], expected: [1] },
          { input: [[1]], expected: [] },
          { input: [[10,2,5,10,9,1,1,4,3,7]], expected: [10,1] }
        ]
      },
      {
        id: 96,
        title: "String to Integer (atoi)",
        category: "string",
        tags: ["string", "parsing", "conversion"],
        difficulty: 5,
        description: "Write a function that converts a string to an integer (implement atoi).",
        starterCode: "def my_atoi(s):\n    pass",
        tests: [
          { input: ["42"], expected: 42 },
          { input: ["   -42"], expected: -42 },
          { input: ["4193 with words"], expected: 4193 },
          { input: ["words and 987"], expected: 0 }
        ]
      },
      {
        id: 97,
        title: "Zigzag Conversion",
        category: "string",
        tags: ["string", "simulation", "pattern"],
        difficulty: 5,
        description: "Write a function that converts a string to zigzag pattern with n rows and reads it row by row.",
        starterCode: "def convert_zigzag(s, num_rows):\n    pass",
        tests: [
          { input: ["PAYPALISHIRING", 3], expected: "PAHNAPLSIIGYIR" },
          { input: ["PAYPALISHIRING", 4], expected: "PINALSIGYAHRPI" },
          { input: ["A", 1], expected: "A" }
        ]
      },
      {
        id: 98,
        title: "Regular Expression Matching",
        category: "string",
        tags: ["string", "dynamic-programming", "recursion"],
        difficulty: 9,
        description: "Write a function that implements regex matching with '.' and '*' support.",
        starterCode: "def is_match(s, p):\n    pass",
        tests: [
          { input: ["aa", "a"], expected: false },
          { input: ["aa", "a*"], expected: true },
          { input: ["ab", ".*"], expected: true },
          { input: ["mississippi", "mis*is*p*."], expected: false }
        ]
      },
      {
        id: 99,
        title: "Wildcard Matching",
        category: "string",
        tags: ["string", "dynamic-programming", "greedy"],
        difficulty: 8,
        description: "Write a function that implements wildcard pattern matching with '?' and '*'.",
        starterCode: "def is_wildcard_match(s, p):\n    pass",
        tests: [
          { input: ["aa", "a"], expected: false },
          { input: ["aa", "*"], expected: true },
          { input: ["cb", "?a"], expected: false },
          { input: ["adceb", "*a*b"], expected: true }
        ]
      },
      {
        id: 100,
        title: "Median of Data Stream",
        category: "design",
        tags: ["design", "heap", "sorting"],
        difficulty: 7,
        description: "Design a class that finds the median from a stream of numbers.",
        starterCode: "class MedianFinder:\n    def __init__(self):\n        pass\n    \n    def add_num(self, num):\n        pass\n    \n    def find_median(self):\n        pass",
        tests: [
          { input: [["add_num", 1], ["add_num", 2], ["find_median"], ["add_num", 3], ["find_median"]], expected: [null, null, 1.5, null, 2.0] }
        ]
      }
    ];

    let currentChallenge = 0;
    let editor = null;
    let pyodide = null;
    let pyodideLoaded = false;
    let storageLoaded = false;

    // Games Variables
    let currentGame = null;
    let lastPlayedGame = null;
    let gameInterval = null;
    let gameAnimationFrame = null;

    async function loadProgress() {
      try {
        const savedChallenge = await window.storage.get('current-challenge');
        if (savedChallenge) {
          currentChallenge = parseInt(savedChallenge.value);
        }
      } catch (error) {
        console.log('No saved progress');
      }
      storageLoaded = true;
      await loadChallenge();
    }

    async function loadChallenge() {
      const challenge = CHALLENGES[currentChallenge];
      document.getElementById('challengeTitle').textContent = challenge.title;
      document.getElementById('challengeDescription').textContent = challenge.description;

      // Check if challenge is completed
      const isCompleted = await isChallengeCompleted(currentChallenge);
      const fileName = (currentChallenge + 1) + '.py';
      const badge = isCompleted ? ' [done]' : '';
      document.getElementById('fileName').textContent = fileName + badge;
      document.getElementById('fileName').style.color = isCompleted ? '#4ecdc4' : '#ffd700';

      document.getElementById('currentNum').textContent = currentChallenge + 1;
      document.getElementById('totalNum').textContent = CHALLENGES.length;
      
      const testCasesDiv = document.getElementById('testCases');
      testCasesDiv.innerHTML = challenge.tests.map(function(test, idx) {
        // Format input display - if single argument, show it directly; if multiple, show with commas
        let inputDisplay;
        if (test.input.length === 1) {
          inputDisplay = JSON.stringify(test.input[0]);
        } else {
          inputDisplay = test.input.map(function(arg) { return JSON.stringify(arg); }).join(', ');
        }
        return '<div class="test-case"><div>Input: <code class="test-input">' + inputDisplay + '</code></div><div>Expected: <code class="test-expected">' + JSON.stringify(test.expected) + '</code></div></div>';
      }).join('');

      document.getElementById('prevBtn').disabled = currentChallenge === 0;
      document.getElementById('nextBtn').disabled = currentChallenge === CHALLENGES.length - 1;

      let code;
      try {
        const savedCode = await window.storage.get('challenge-' + currentChallenge);
        code = savedCode ? savedCode.value : challenge.starterCode;
      } catch (error) {
        code = challenge.starterCode;
      }

      if (editor) {
        editor.setValue(code);
      }

      document.getElementById('output').textContent = '';
      document.getElementById('testResults').innerHTML = '';
    }

    async function changeChallenge(index) {
      currentChallenge = index;
      try {
        await window.storage.set('current-challenge', index.toString(), false);
      } catch (error) {
        console.error('Failed to save challenge index');
      }
      await loadChallenge();
    }

    function prevChallenge() {
      if (currentChallenge > 0) {
        changeChallenge(currentChallenge - 1);
      }
    }

    function nextChallenge() {
      if (currentChallenge < CHALLENGES.length - 1) {
        changeChallenge(currentChallenge + 1);
      }
    }

    function askClaude() {
      const challenge = CHALLENGES[currentChallenge];
      const userCode = editor ? editor.getValue() : challenge.starterCode;

      // Format test cases nicely
      let testCasesText = challenge.tests.map(function(test, idx) {
        let inputDisplay;
        if (test.input.length === 1) {
          inputDisplay = JSON.stringify(test.input[0]);
        } else {
          inputDisplay = test.input.map(function(arg) { return JSON.stringify(arg); }).join(', ');
        }
        return 'Test ' + (idx + 1) + ':\n  Input: ' + inputDisplay + '\n  Expected Output: ' + JSON.stringify(test.expected);
      }).join('\n\n');

      // Create a well-structured educational prompt
      const prompt = `I'm learning Python and I'm stuck on this coding challenge. I need help understanding how to solve it, not just the answer.

**Challenge: ${challenge.title}**
Category: ${challenge.category}
Difficulty: ${challenge.difficulty}/10
Tags: ${challenge.tags.join(', ')}

**Problem Description:**
${challenge.description}

**Test Cases:**
${testCasesText}

**My Current Code:**
\`\`\`python
${userCode}
\`\`\`

**Please help me by:**
1. First, help me understand what the problem is really asking for in simple terms
2. Break down the problem into smaller steps I need to solve
3. Guide me through the thought process and algorithm/approach needed
4. Explain any key concepts or patterns I should understand
5. Point out what might be wrong with my current approach (if applicable)
6. Give me hints to guide me toward the solution, rather than giving me the complete answer
7. Help me understand why this approach works and when I might use similar patterns in the future

Please be patient and explain things clearly - I'm here to learn and understand deeply, not just copy code. Thank you! üôè`;

      // URL encode the prompt
      const encodedPrompt = encodeURIComponent(prompt);

      // Open Claude with the pre-filled prompt
      window.open('https://claude.ai/new?q=' + encodedPrompt, '_blank');
    }

    async function resetChallenge() {
      const challenge = CHALLENGES[currentChallenge];
      editor.setValue(challenge.starterCode);
      document.getElementById('output').textContent = '';
      document.getElementById('testResults').innerHTML = '';
      
      try {
        await window.storage.delete('challenge-' + currentChallenge, false);
      } catch (error) {
        console.error('Failed to delete saved code');
      }
    }

    async function saveCode(code) {
      try {
        await window.storage.set('challenge-' + currentChallenge, code, false);
      } catch (error) {
        console.error('Failed to save code');
      }
    }

    async function markChallengeCompleted(challengeIndex) {
      try {
        await window.storage.set('completed-' + challengeIndex, 'true', false);
      } catch (error) {
        console.error('Failed to save completion status');
      }
    }

    async function isChallengeCompleted(challengeIndex) {
      try {
        const result = await window.storage.get('completed-' + challengeIndex);
        return result && result.value === 'true';
      } catch (error) {
        return false;
      }
    }

    async function submitCode() {
      if (!pyodideLoaded) {
        document.getElementById('output').textContent = 'Python runtime is still loading...';
        return;
      }

      const submitBtn = document.getElementById('submitBtn');
      const submitBtnMobile = document.getElementById('submitBtnMobile');
      submitBtn.disabled = true;
      submitBtn.innerHTML = 'Running...';
      submitBtnMobile.disabled = true;
      submitBtnMobile.innerHTML = 'Running...';
      
      document.getElementById('output').textContent = '';
      document.getElementById('testResults').innerHTML = '';

      const challenge = CHALLENGES[currentChallenge];
      const code = editor.getValue();
      const results = [];

      try {
        await pyodide.runPythonAsync('import sys\nfrom io import StringIO\nsys.stdout = StringIO()\nsys.stderr = StringIO()');

        await pyodide.runPythonAsync(code);

        for (let i = 0; i < challenge.tests.length; i++) {
          const test = challenge.tests[i];
          try {
            const funcName = code.match(/def\s+(\w+)\s*\(/)[1];
            const args = JSON.stringify(test.input);
            const result = await pyodide.runPythonAsync('import json; json.dumps(' + funcName + '(*' + args + '))');
            const parsed = JSON.parse(result);
            const passed = JSON.stringify(parsed) === JSON.stringify(test.expected);
            
            results.push({
              passed: passed,
              input: test.input,
              expected: test.expected,
              actual: parsed
            });
          } catch (error) {
            results.push({
              passed: false,
              input: test.input,
              expected: test.expected,
              error: error.message
            });
          }
        }

        const stdout = await pyodide.runPythonAsync('sys.stdout.getvalue()');
        const stderr = await pyodide.runPythonAsync('sys.stderr.getvalue()');

        const passed = results.filter(function(r) { return r.passed; }).length;
        const total = results.length;

        let outputMsg = '';
        if (stdout) {
          outputMsg += 'Debug Output:\n' + stdout + '\n\n';
        }
        if (stderr) {
          outputMsg += 'Errors:\n' + stderr + '\n\n';
        }

        if (passed === total) {
          outputMsg += 'All tests passed! (' + passed + '/' + total + ')';
          // Mark challenge as completed
          await markChallengeCompleted(currentChallenge);
          // Update the filename badge
          const fileName = (currentChallenge + 1) + '.py';
          document.getElementById('fileName').textContent = fileName + ' [done]';
          document.getElementById('fileName').style.color = '#4ecdc4';
        } else {
          outputMsg += 'Tests passed: ' + passed + '/' + total;
        }

        document.getElementById('output').textContent = outputMsg;

        const testResultsHtml = results.map(function(result, idx) {
          // Format input display consistently
          let inputDisplay;
          if (result.input.length === 1) {
            inputDisplay = JSON.stringify(result.input[0]);
          } else {
            inputDisplay = result.input.map(function(arg) { return JSON.stringify(arg); }).join(', ');
          }
          return '<div class="test-result ' + (result.passed ? 'passed' : 'failed') + '"><div class="test-result-title">Test ' + (idx + 1) + ': ' + (result.passed ? 'Passed' : 'Failed') + '</div><div class="test-result-details"><div>Input: ' + inputDisplay + '</div><div>Expected: ' + JSON.stringify(result.expected) + '</div>' + (result.error ? '<div>Error: ' + result.error + '</div>' : '<div>Got: ' + JSON.stringify(result.actual) + '</div>') + '</div></div>';
        }).join('');
        
        document.getElementById('testResults').innerHTML = testResultsHtml;

      } catch (error) {
        document.getElementById('output').textContent = 'Error: ' + error.message;
      }

      submitBtn.disabled = false;
      submitBtn.innerHTML = 'Submit';
      submitBtnMobile.disabled = false;
      submitBtnMobile.innerHTML = 'Submit';
    }

    document.getElementById('loadingIndicator').style.display = 'flex';

    // Wait for Monaco loader to be ready
    function initMonaco() {
      if (typeof require === 'undefined') {
        setTimeout(initMonaco, 50);
        return;
      }

      require.config({ paths: { vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.53.0/min/vs' } });
      require(['vs/editor/editor.main'], async function() {
      await loadProgress();
      
      const challenge = CHALLENGES[currentChallenge];
      let code;
      try {
        const savedCode = await window.storage.get('challenge-' + currentChallenge);
        code = savedCode ? savedCode.value : challenge.starterCode;
      } catch (error) {
        code = challenge.starterCode;
      }

      editor = monaco.editor.create(document.getElementById('editor'), {
        value: code,
        language: 'python',
        theme: 'vs-dark',
        minimap: { enabled: false },
        fontSize: 15,
        lineNumbers: 'on',
        roundedSelection: false,
        scrollBeyondLastLine: false,
        automaticLayout: true
      });

      editor.onDidChangeModelContent(function() {
        saveCode(editor.getValue());
      });
    });
    }

    // Start Monaco initialization
    initMonaco();

    // Wait for Pyodide loader to be ready
    function initPyodide() {
      if (typeof loadPyodide === 'undefined') {
        setTimeout(initPyodide, 50);
        return;
      }

      loadPyodide({
        indexURL: 'https://cdn.jsdelivr.net/pyodide/v0.28.3/full/'
      }).then(function(py) {
        pyodide = py;
        pyodideLoaded = true;
        document.getElementById('loadingIndicator').style.display = 'none';
        document.getElementById('submitBtn').disabled = false;
        document.getElementById('submitBtnMobile').disabled = false;
      });
    }

    // Start Pyodide initialization
    initPyodide();

    // Games Functions
    function openGames() {
      document.getElementById('gamesModal').style.display = 'flex';
    }

    function closeGames() {
      document.getElementById('gamesModal').style.display = 'none';
      if (currentGame) {
        stopCurrentGame();
      }
      document.getElementById('gamesMenu').style.display = 'grid';
      document.getElementById('gameArea').style.display = 'none';
    }

    function backToMenu() {
      stopCurrentGame();
      document.getElementById('gamesMenu').style.display = 'grid';
      document.getElementById('gameArea').style.display = 'none';
      document.getElementById('mobileControls').style.display = 'none';
    }

    function stopCurrentGame() {
      if (gameInterval) {
        clearInterval(gameInterval);
        gameInterval = null;
      }
      if (gameAnimationFrame) {
        cancelAnimationFrame(gameAnimationFrame);
        gameAnimationFrame = null;
      }
      currentGame = null;
      document.removeEventListener('keydown', snakeKeyHandler);
      document.removeEventListener('keydown', tetrisKeyHandler);
      document.removeEventListener('keydown', breakoutKeyHandler);
      document.removeEventListener('mousemove', breakoutMouseHandler);
      document.removeEventListener('click', memoryClickHandler);
      document.removeEventListener('keydown', spaceShooterKeyHandler);
      document.removeEventListener('keyup', spaceShooterKeyUpHandler);
    }

    function startGame(game) {
      document.getElementById('gamesMenu').style.display = 'none';
      document.getElementById('gameArea').style.display = 'block';
      currentGame = game;
      lastPlayedGame = game;

      // Show mobile controls for games that need them
      if (window.innerWidth <= 768 && (game === 'snake' || game === 'tetris')) {
        document.getElementById('mobileControls').style.display = 'flex';
      } else {
        document.getElementById('mobileControls').style.display = 'none';
      }

      if (game === 'snake') {
        initSnake();
      } else if (game === 'tetris') {
        initTetris();
      } else if (game === 'breakout') {
        initBreakout();
      } else if (game === 'memory') {
        initMemory();
      } else if (game === 'spaceshooter') {
        initSpaceShooter();
      }
    }

    function handleMobileControl(direction) {
      if (currentGame === 'snake') {
        if (direction === 'up' && snakeDirection !== 'down') snakeDirection = 'up';
        else if (direction === 'down' && snakeDirection !== 'up') snakeDirection = 'down';
        else if (direction === 'left' && snakeDirection !== 'right') snakeDirection = 'left';
        else if (direction === 'right' && snakeDirection !== 'left') snakeDirection = 'right';
      } else if (currentGame === 'tetris') {
        if (direction === 'left') moveTetrisPiece(-1, 0);
        else if (direction === 'right') moveTetrisPiece(1, 0);
        else if (direction === 'down') moveTetrisPiece(0, 1);
        else if (direction === 'up' || direction === 'rotate') rotateTetrisPiece();
      }
    }

    // Snake Game
    let snake, snakeDirection, snakeFood, snakeScore, snakeCanvas, snakeCtx;

    function snakeKeyHandler(e) {
      if (!currentGame || currentGame !== 'snake') return;
      const key = e.key;
      if (key === 'ArrowUp' && snakeDirection !== 'down') {
        snakeDirection = 'up';
        e.preventDefault();
      } else if (key === 'ArrowDown' && snakeDirection !== 'up') {
        snakeDirection = 'down';
        e.preventDefault();
      } else if (key === 'ArrowLeft' && snakeDirection !== 'right') {
        snakeDirection = 'left';
        e.preventDefault();
      } else if (key === 'ArrowRight' && snakeDirection !== 'left') {
        snakeDirection = 'right';
        e.preventDefault();
      }
    }

    function initSnake() {
      snakeCanvas = document.getElementById('gameCanvas');
      snakeCtx = snakeCanvas.getContext('2d');
      snakeCanvas.width = 400;
      snakeCanvas.height = 400;

      snake = [{x: 10, y: 10}];
      snakeDirection = 'right';
      snakeScore = 0;
      placeSnakeFood();

      document.getElementById('gameScore').textContent = 'Score: 0';
      document.getElementById('gameInstructions').innerHTML = '<strong>Controls:</strong> Use arrow keys to move the snake. Eat the red food to grow!';

      document.addEventListener('keydown', snakeKeyHandler);
      gameInterval = setInterval(updateSnake, 100);
    }

    function placeSnakeFood() {
      snakeFood = {
        x: Math.floor(Math.random() * 20),
        y: Math.floor(Math.random() * 20)
      };
    }

    function updateSnake() {
      const head = {x: snake[0].x, y: snake[0].y};

      if (snakeDirection === 'up') head.y--;
      if (snakeDirection === 'down') head.y++;
      if (snakeDirection === 'left') head.x--;
      if (snakeDirection === 'right') head.x++;

      // Check wall collision
      if (head.x < 0 || head.x >= 20 || head.y < 0 || head.y >= 20) {
        gameOver('Snake');
        return;
      }

      // Check self collision
      for (let segment of snake) {
        if (segment.x === head.x && segment.y === head.y) {
          gameOver('Snake');
          return;
        }
      }

      snake.unshift(head);

      // Check food collision
      if (head.x === snakeFood.x && head.y === snakeFood.y) {
        snakeScore += 10;
        document.getElementById('gameScore').textContent = 'Score: ' + snakeScore;
        placeSnakeFood();
      } else {
        snake.pop();
      }

      drawSnake();
    }

    function drawSnake() {
      snakeCtx.fillStyle = '#fff';
      snakeCtx.fillRect(0, 0, snakeCanvas.width, snakeCanvas.height);

      // Draw snake
      snakeCtx.fillStyle = '#4ecdc4';
      for (let segment of snake) {
        snakeCtx.fillRect(segment.x * 20, segment.y * 20, 19, 19);
      }

      // Draw food
      snakeCtx.fillStyle = '#ff8c42';
      snakeCtx.fillRect(snakeFood.x * 20, snakeFood.y * 20, 19, 19);
    }

    // Tetris Game
    let tetrisBoard, tetrisCurrentPiece, tetrisScore, tetrisCanvas, tetrisCtx;
    const TETRIS_COLS = 10;
    const TETRIS_ROWS = 20;
    const BLOCK_SIZE = 20;

    const TETRIS_PIECES = [
      [[1,1,1,1]], // I
      [[1,1],[1,1]], // O
      [[0,1,0],[1,1,1]], // T
      [[1,0,0],[1,1,1]], // L
      [[0,0,1],[1,1,1]], // J
      [[0,1,1],[1,1,0]], // S
      [[1,1,0],[0,1,1]]  // Z
    ];

    const TETRIS_COLORS = ['#ff8c42', '#4ecdc4', '#ffd700', '#4a90e2', '#a9d3ab', '#ff8c42', '#4ecdc4'];

    function tetrisKeyHandler(e) {
      if (!currentGame || currentGame !== 'tetris') return;
      const key = e.key;
      if (key === 'ArrowLeft') {
        moveTetrisPiece(-1, 0);
        e.preventDefault();
      } else if (key === 'ArrowRight') {
        moveTetrisPiece(1, 0);
        e.preventDefault();
      } else if (key === 'ArrowDown') {
        moveTetrisPiece(0, 1);
        e.preventDefault();
      } else if (key === 'ArrowUp' || key === ' ') {
        rotateTetrisPiece();
        e.preventDefault();
      }
    }

    function initTetris() {
      tetrisCanvas = document.getElementById('gameCanvas');
      tetrisCtx = tetrisCanvas.getContext('2d');
      tetrisCanvas.width = TETRIS_COLS * BLOCK_SIZE;
      tetrisCanvas.height = TETRIS_ROWS * BLOCK_SIZE;

      tetrisBoard = Array(TETRIS_ROWS).fill(null).map(() => Array(TETRIS_COLS).fill(0));
      tetrisScore = 0;
      spawnTetrisPiece();

      document.getElementById('gameScore').textContent = 'Score: 0';
      document.getElementById('gameInstructions').innerHTML = '<strong>Controls:</strong> Arrow keys to move, Up/Space to rotate. Complete lines to score!';

      document.addEventListener('keydown', tetrisKeyHandler);
      gameInterval = setInterval(updateTetris, 500);
    }

    function spawnTetrisPiece() {
      const pieceIndex = Math.floor(Math.random() * TETRIS_PIECES.length);
      tetrisCurrentPiece = {
        shape: TETRIS_PIECES[pieceIndex],
        color: TETRIS_COLORS[pieceIndex],
        x: Math.floor(TETRIS_COLS / 2) - 1,
        y: 0
      };

      if (checkTetrisCollision(tetrisCurrentPiece.x, tetrisCurrentPiece.y, tetrisCurrentPiece.shape)) {
        gameOver('Tetris');
      }
    }

    function moveTetrisPiece(dx, dy) {
      const newX = tetrisCurrentPiece.x + dx;
      const newY = tetrisCurrentPiece.y + dy;

      if (!checkTetrisCollision(newX, newY, tetrisCurrentPiece.shape)) {
        tetrisCurrentPiece.x = newX;
        tetrisCurrentPiece.y = newY;
        drawTetris();
        return true;
      }
      return false;
    }

    function rotateTetrisPiece() {
      const rotated = tetrisCurrentPiece.shape[0].map((_, i) =>
        tetrisCurrentPiece.shape.map(row => row[i]).reverse()
      );

      if (!checkTetrisCollision(tetrisCurrentPiece.x, tetrisCurrentPiece.y, rotated)) {
        tetrisCurrentPiece.shape = rotated;
        drawTetris();
      }
    }

    function checkTetrisCollision(x, y, shape) {
      for (let row = 0; row < shape.length; row++) {
        for (let col = 0; col < shape[row].length; col++) {
          if (shape[row][col]) {
            const newX = x + col;
            const newY = y + row;

            if (newX < 0 || newX >= TETRIS_COLS || newY >= TETRIS_ROWS) {
              return true;
            }

            if (newY >= 0 && tetrisBoard[newY][newX]) {
              return true;
            }
          }
        }
      }
      return false;
    }

    function updateTetris() {
      if (!moveTetrisPiece(0, 1)) {
        mergeTetrisPiece();
        clearTetrisLines();
        spawnTetrisPiece();
      }
      drawTetris();
    }

    function mergeTetrisPiece() {
      for (let row = 0; row < tetrisCurrentPiece.shape.length; row++) {
        for (let col = 0; col < tetrisCurrentPiece.shape[row].length; col++) {
          if (tetrisCurrentPiece.shape[row][col]) {
            const y = tetrisCurrentPiece.y + row;
            const x = tetrisCurrentPiece.x + col;
            if (y >= 0) {
              tetrisBoard[y][x] = tetrisCurrentPiece.color;
            }
          }
        }
      }
    }

    function clearTetrisLines() {
      let linesCleared = 0;
      for (let row = TETRIS_ROWS - 1; row >= 0; row--) {
        if (tetrisBoard[row].every(cell => cell !== 0)) {
          tetrisBoard.splice(row, 1);
          tetrisBoard.unshift(Array(TETRIS_COLS).fill(0));
          linesCleared++;
          row++;
        }
      }

      if (linesCleared > 0) {
        tetrisScore += linesCleared * 100;
        document.getElementById('gameScore').textContent = 'Score: ' + tetrisScore;
      }
    }

    function drawTetris() {
      // Clear canvas
      tetrisCtx.fillStyle = '#fff';
      tetrisCtx.fillRect(0, 0, tetrisCanvas.width, tetrisCanvas.height);

      // Draw board
      for (let row = 0; row < TETRIS_ROWS; row++) {
        for (let col = 0; col < TETRIS_COLS; col++) {
          if (tetrisBoard[row][col]) {
            tetrisCtx.fillStyle = tetrisBoard[row][col];
            tetrisCtx.fillRect(col * BLOCK_SIZE, row * BLOCK_SIZE, BLOCK_SIZE - 1, BLOCK_SIZE - 1);
          }
        }
      }

      // Draw current piece
      tetrisCtx.fillStyle = tetrisCurrentPiece.color;
      for (let row = 0; row < tetrisCurrentPiece.shape.length; row++) {
        for (let col = 0; col < tetrisCurrentPiece.shape[row].length; col++) {
          if (tetrisCurrentPiece.shape[row][col]) {
            tetrisCtx.fillRect(
              (tetrisCurrentPiece.x + col) * BLOCK_SIZE,
              (tetrisCurrentPiece.y + row) * BLOCK_SIZE,
              BLOCK_SIZE - 1,
              BLOCK_SIZE - 1
            );
          }
        }
      }

      // Draw grid
      tetrisCtx.strokeStyle = '#e0e0e0';
      tetrisCtx.lineWidth = 0.5;
      for (let i = 0; i <= TETRIS_COLS; i++) {
        tetrisCtx.beginPath();
        tetrisCtx.moveTo(i * BLOCK_SIZE, 0);
        tetrisCtx.lineTo(i * BLOCK_SIZE, TETRIS_ROWS * BLOCK_SIZE);
        tetrisCtx.stroke();
      }
      for (let i = 0; i <= TETRIS_ROWS; i++) {
        tetrisCtx.beginPath();
        tetrisCtx.moveTo(0, i * BLOCK_SIZE);
        tetrisCtx.lineTo(TETRIS_COLS * BLOCK_SIZE, i * BLOCK_SIZE);
        tetrisCtx.stroke();
      }
    }

    function showGameOver(title, message) {
      document.getElementById('gameOverTitle').textContent = title;
      document.getElementById('gameOverMessage').textContent = message;
      updateBackToCodeButton();
      document.getElementById('gameOverOverlay').style.display = 'flex';
    }

    const funkyMessages = [
      "Code > Games üíª",
      "Python Won't Judge You",
      "Algorithms Never Lose",
      "Debug Life Instead",
      "Real Winners Code",
      "Time to Actually Win",
      "Coding = No Game Overs",
      "Be a 10x Coder Instead",
      "Your Code > Your Score",
      "Python Believes in You",
      "Git Gud at Python",
      "Compile Your Feelings",
      "Return to Greatness",
      "Function > Frustration",
      "Loop Back to Learning",
      "Try Code, Catch Skills",
      "if(skills): code()",
      "Level Up IRL",
      "Rage Quit? Nah, Rage Code!"
    ];

    function closeGameOver() {
      document.getElementById('gameOverOverlay').style.display = 'none';
      backToMenu();
    }

    function backToCoding() {
      document.getElementById('gameOverOverlay').style.display = 'none';
      closeGames();
    }

    function restartGame() {
      document.getElementById('gameOverOverlay').style.display = 'none';
      stopCurrentGame();
      if (lastPlayedGame) {
        startGame(lastPlayedGame);
      }
    }

    function updateBackToCodeButton() {
      const randomMessage = funkyMessages[Math.floor(Math.random() * funkyMessages.length)];
      document.getElementById('backToCodeBtn').textContent = randomMessage;
    }

    function gameOver(gameName) {
      stopCurrentGame();
      let score = 0;
      if (gameName === 'Snake') score = snakeScore;
      else if (gameName === 'Tetris') score = tetrisScore;
      else if (gameName === 'Breakout') score = breakoutScore;
      else if (gameName === 'Memory') score = memoryScore;
      else if (gameName === 'Space Shooter') score = spaceShooterScore;
      showGameOver('Game Over!', gameName + ' - Final Score: ' + score);
    }

    function gameWin(gameName, score) {
      stopCurrentGame();
      showGameOver('You Win! üéâ', gameName + ' - Final Score: ' + score);
    }

    // Breakout Game
    let breakoutPaddle, breakoutBall, breakoutBricks, breakoutScore, breakoutCanvas, breakoutCtx;
    const PADDLE_WIDTH = 100;
    const PADDLE_HEIGHT = 20;
    const BALL_RADIUS = 8;
    const BRICK_ROWS = 5;
    const BRICK_COLS = 8;
    const BRICK_WIDTH = 45;
    const BRICK_HEIGHT = 20;
    const BRICK_PADDING = 5;

    function breakoutMouseHandler(e) {
      if (!currentGame || currentGame !== 'breakout') return;
      const rect = breakoutCanvas.getBoundingClientRect();
      const mouseX = e.clientX - rect.left;
      breakoutPaddle.x = Math.max(0, Math.min(mouseX - PADDLE_WIDTH / 2, breakoutCanvas.width - PADDLE_WIDTH));
    }

    function breakoutKeyHandler(e) {
      if (!currentGame || currentGame !== 'breakout') return;
      if (e.key === 'ArrowLeft') {
        breakoutPaddle.x = Math.max(0, breakoutPaddle.x - 20);
      } else if (e.key === 'ArrowRight') {
        breakoutPaddle.x = Math.min(breakoutCanvas.width - PADDLE_WIDTH, breakoutPaddle.x + 20);
      }
    }

    function initBreakout() {
      breakoutCanvas = document.getElementById('gameCanvas');
      breakoutCtx = breakoutCanvas.getContext('2d');
      breakoutCanvas.width = 400;
      breakoutCanvas.height = 500;

      breakoutPaddle = { x: 150, y: 460, width: PADDLE_WIDTH, height: PADDLE_HEIGHT };
      breakoutBall = { x: 200, y: 400, dx: 3, dy: -3, radius: BALL_RADIUS };
      breakoutScore = 0;

      breakoutBricks = [];
      for (let row = 0; row < BRICK_ROWS; row++) {
        breakoutBricks[row] = [];
        for (let col = 0; col < BRICK_COLS; col++) {
          breakoutBricks[row][col] = { x: col * (BRICK_WIDTH + BRICK_PADDING) + 10, y: row * (BRICK_HEIGHT + BRICK_PADDING) + 30, status: 1 };
        }
      }

      document.getElementById('gameScore').textContent = 'Score: 0';
      document.getElementById('gameInstructions').innerHTML = '<strong>Controls:</strong> Move mouse or arrow keys to control paddle. Break all bricks!';

      document.addEventListener('mousemove', breakoutMouseHandler);
      document.addEventListener('keydown', breakoutKeyHandler);

      function gameLoop() {
        if (currentGame === 'breakout') {
          updateBreakout();
          gameAnimationFrame = requestAnimationFrame(gameLoop);
        }
      }
      gameLoop();
    }

    function updateBreakout() {
      breakoutBall.x += breakoutBall.dx;
      breakoutBall.y += breakoutBall.dy;

      // Wall collision
      if (breakoutBall.x + breakoutBall.radius > breakoutCanvas.width || breakoutBall.x - breakoutBall.radius < 0) {
        breakoutBall.dx = -breakoutBall.dx;
      }
      if (breakoutBall.y - breakoutBall.radius < 0) {
        breakoutBall.dy = -breakoutBall.dy;
      }

      // Paddle collision
      if (breakoutBall.y + breakoutBall.radius > breakoutPaddle.y &&
          breakoutBall.x > breakoutPaddle.x &&
          breakoutBall.x < breakoutPaddle.x + breakoutPaddle.width) {
        breakoutBall.dy = -breakoutBall.dy;
        // Add some angle based on where ball hits paddle
        const hitPos = (breakoutBall.x - breakoutPaddle.x) / breakoutPaddle.width;
        breakoutBall.dx = (hitPos - 0.5) * 6;
      }

      // Bottom wall - game over
      if (breakoutBall.y + breakoutBall.radius > breakoutCanvas.height) {
        gameOver('Breakout');
        return;
      }

      // Brick collision
      for (let row = 0; row < BRICK_ROWS; row++) {
        for (let col = 0; col < BRICK_COLS; col++) {
          const brick = breakoutBricks[row][col];
          if (brick.status === 1) {
            if (breakoutBall.x > brick.x && breakoutBall.x < brick.x + BRICK_WIDTH &&
                breakoutBall.y > brick.y && breakoutBall.y < brick.y + BRICK_HEIGHT) {
              breakoutBall.dy = -breakoutBall.dy;
              brick.status = 0;
              breakoutScore += 10;
              document.getElementById('gameScore').textContent = 'Score: ' + breakoutScore;

              // Check win
              if (breakoutScore === BRICK_ROWS * BRICK_COLS * 10) {
                gameWin('Breakout', breakoutScore);
                return;
              }
            }
          }
        }
      }

      drawBreakout();
    }

    function drawBreakout() {
      breakoutCtx.fillStyle = '#fff';
      breakoutCtx.fillRect(0, 0, breakoutCanvas.width, breakoutCanvas.height);

      // Draw bricks
      const brickColors = ['#ff8c42', '#4ecdc4', '#ffd700', '#4a90e2', '#a9d3ab'];
      for (let row = 0; row < BRICK_ROWS; row++) {
        for (let col = 0; col < BRICK_COLS; col++) {
          const brick = breakoutBricks[row][col];
          if (brick.status === 1) {
            breakoutCtx.fillStyle = brickColors[row];
            breakoutCtx.fillRect(brick.x, brick.y, BRICK_WIDTH, BRICK_HEIGHT);
            breakoutCtx.strokeStyle = '#000';
            breakoutCtx.lineWidth = 2;
            breakoutCtx.strokeRect(brick.x, brick.y, BRICK_WIDTH, BRICK_HEIGHT);
          }
        }
      }

      // Draw paddle
      breakoutCtx.fillStyle = '#4a90e2';
      breakoutCtx.fillRect(breakoutPaddle.x, breakoutPaddle.y, breakoutPaddle.width, breakoutPaddle.height);
      breakoutCtx.strokeStyle = '#000';
      breakoutCtx.lineWidth = 2;
      breakoutCtx.strokeRect(breakoutPaddle.x, breakoutPaddle.y, breakoutPaddle.width, breakoutPaddle.height);

      // Draw ball
      breakoutCtx.fillStyle = '#ff8c42';
      breakoutCtx.beginPath();
      breakoutCtx.arc(breakoutBall.x, breakoutBall.y, breakoutBall.radius, 0, Math.PI * 2);
      breakoutCtx.fill();
      breakoutCtx.strokeStyle = '#000';
      breakoutCtx.lineWidth = 2;
      breakoutCtx.stroke();
    }

    // Memory Match Game
    let memoryCards, memoryFlipped, memoryMatched, memoryScore, memoryCanvas, memoryCtx;
    const MEMORY_COLS = 4;
    const MEMORY_ROWS = 4;
    const CARD_SIZE = 80;
    const CARD_MARGIN = 10;

    function memoryClickHandler(e) {
      if (!currentGame || currentGame !== 'memory' || memoryFlipped.length >= 2) return;

      const rect = memoryCanvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      for (let i = 0; i < memoryCards.length; i++) {
        const card = memoryCards[i];
        if (x > card.x && x < card.x + CARD_SIZE && y > card.y && y < card.y + CARD_SIZE) {
          if (!card.flipped && !card.matched) {
            card.flipped = true;
            memoryFlipped.push(i);
            drawMemory();

            if (memoryFlipped.length === 2) {
              setTimeout(checkMemoryMatch, 500);
            }
          }
          break;
        }
      }
    }

    function initMemory() {
      memoryCanvas = document.getElementById('gameCanvas');
      memoryCtx = memoryCanvas.getContext('2d');
      memoryCanvas.width = 400;
      memoryCanvas.height = 400;

      const symbols = ['üéÆ', 'üéØ', 'üé®', 'üé™', 'üé≠', 'üé∞', 'üé≤', 'üé∏'];
      const deck = [...symbols, ...symbols];

      // Shuffle
      for (let i = deck.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
      }

      memoryCards = [];
      for (let row = 0; row < MEMORY_ROWS; row++) {
        for (let col = 0; col < MEMORY_COLS; col++) {
          memoryCards.push({
            symbol: deck[row * MEMORY_COLS + col],
            x: col * (CARD_SIZE + CARD_MARGIN) + 20,
            y: row * (CARD_SIZE + CARD_MARGIN) + 20,
            flipped: false,
            matched: false
          });
        }
      }

      memoryFlipped = [];
      memoryMatched = 0;
      memoryScore = 0;

      document.getElementById('gameScore').textContent = 'Matches: 0/8';
      document.getElementById('gameInstructions').innerHTML = '<strong>Controls:</strong> Click cards to flip them. Match all pairs!';

      memoryCanvas.addEventListener('click', memoryClickHandler);
      drawMemory();
    }

    function checkMemoryMatch() {
      const card1 = memoryCards[memoryFlipped[0]];
      const card2 = memoryCards[memoryFlipped[1]];

      if (card1.symbol === card2.symbol) {
        card1.matched = true;
        card2.matched = true;
        memoryMatched++;
        memoryScore += 10;
        document.getElementById('gameScore').textContent = 'Matches: ' + memoryMatched + '/8';

        if (memoryMatched === 8) {
          setTimeout(function() {
            gameWin('Memory Match', memoryScore);
          }, 300);
        }
      } else {
        card1.flipped = false;
        card2.flipped = false;
      }

      memoryFlipped = [];
      drawMemory();
    }

    function drawMemory() {
      memoryCtx.fillStyle = '#fff';
      memoryCtx.fillRect(0, 0, memoryCanvas.width, memoryCanvas.height);

      for (const card of memoryCards) {
        if (card.matched) {
          memoryCtx.fillStyle = '#4ecdc4';
        } else if (card.flipped) {
          memoryCtx.fillStyle = '#ffd700';
        } else {
          memoryCtx.fillStyle = '#4a90e2';
        }

        memoryCtx.fillRect(card.x, card.y, CARD_SIZE, CARD_SIZE);
        memoryCtx.strokeStyle = '#000';
        memoryCtx.lineWidth = 3;
        memoryCtx.strokeRect(card.x, card.y, CARD_SIZE, CARD_SIZE);

        if (card.flipped || card.matched) {
          memoryCtx.font = '40px Arial';
          memoryCtx.textAlign = 'center';
          memoryCtx.textBaseline = 'middle';
          memoryCtx.fillStyle = '#000';
          memoryCtx.fillText(card.symbol, card.x + CARD_SIZE / 2, card.y + CARD_SIZE / 2);
        } else {
          memoryCtx.font = 'bold 30px Arial';
          memoryCtx.textAlign = 'center';
          memoryCtx.textBaseline = 'middle';
          memoryCtx.fillStyle = '#fff';
          memoryCtx.fillText('?', card.x + CARD_SIZE / 2, card.y + CARD_SIZE / 2);
        }
      }
    }

    // Space Shooter Game
    let spaceShooterPlayer, spaceShooterEnemies, spaceShooterBullets, spaceShooterScore, spaceShooterCanvas, spaceShooterCtx;
    let spaceShooterKeys = {};

    function spaceShooterKeyHandler(e) {
      if (!currentGame || currentGame !== 'spaceshooter') return;
      spaceShooterKeys[e.key] = true;
      if (e.key === ' ') {
        shootBullet();
        e.preventDefault();
      }
    }

    function spaceShooterKeyUpHandler(e) {
      if (!currentGame || currentGame !== 'spaceshooter') return;
      spaceShooterKeys[e.key] = false;
    }

    function initSpaceShooter() {
      spaceShooterCanvas = document.getElementById('gameCanvas');
      spaceShooterCtx = spaceShooterCanvas.getContext('2d');
      spaceShooterCanvas.width = 400;
      spaceShooterCanvas.height = 500;

      spaceShooterPlayer = { x: 180, y: 450, width: 40, height: 40, speed: 5 };
      spaceShooterEnemies = [];
      spaceShooterBullets = [];
      spaceShooterScore = 0;
      spaceShooterKeys = {};

      document.getElementById('gameScore').textContent = 'Score: 0';
      document.getElementById('gameInstructions').innerHTML = '<strong>Controls:</strong> Arrow keys to move, Space to shoot. Destroy all enemies!';

      document.addEventListener('keydown', spaceShooterKeyHandler);
      document.addEventListener('keyup', spaceShooterKeyUpHandler);

      // Spawn enemies periodically
      gameInterval = setInterval(spawnEnemy, 1500);

      function gameLoop() {
        if (currentGame === 'spaceshooter') {
          updateSpaceShooter();
          gameAnimationFrame = requestAnimationFrame(gameLoop);
        }
      }
      gameLoop();
    }

    function spawnEnemy() {
      if (currentGame === 'spaceshooter') {
        spaceShooterEnemies.push({
          x: Math.random() * (spaceShooterCanvas.width - 30),
          y: -30,
          width: 30,
          height: 30,
          speed: 2 + Math.random()
        });
      }
    }

    function shootBullet() {
      spaceShooterBullets.push({
        x: spaceShooterPlayer.x + spaceShooterPlayer.width / 2 - 2,
        y: spaceShooterPlayer.y,
        width: 4,
        height: 10,
        speed: 7
      });
    }

    function updateSpaceShooter() {
      // Move player
      if (spaceShooterKeys['ArrowLeft']) {
        spaceShooterPlayer.x = Math.max(0, spaceShooterPlayer.x - spaceShooterPlayer.speed);
      }
      if (spaceShooterKeys['ArrowRight']) {
        spaceShooterPlayer.x = Math.min(spaceShooterCanvas.width - spaceShooterPlayer.width, spaceShooterPlayer.x + spaceShooterPlayer.speed);
      }

      // Move bullets
      for (let i = spaceShooterBullets.length - 1; i >= 0; i--) {
        spaceShooterBullets[i].y -= spaceShooterBullets[i].speed;
        if (spaceShooterBullets[i].y < 0) {
          spaceShooterBullets.splice(i, 1);
        }
      }

      // Move enemies
      for (let i = spaceShooterEnemies.length - 1; i >= 0; i--) {
        spaceShooterEnemies[i].y += spaceShooterEnemies[i].speed;

        // Check collision with player
        if (spaceShooterEnemies[i].y + spaceShooterEnemies[i].height > spaceShooterPlayer.y &&
            spaceShooterEnemies[i].x < spaceShooterPlayer.x + spaceShooterPlayer.width &&
            spaceShooterEnemies[i].x + spaceShooterEnemies[i].width > spaceShooterPlayer.x) {
          gameOver('Space Shooter');
          return;
        }

        if (spaceShooterEnemies[i].y > spaceShooterCanvas.height) {
          spaceShooterEnemies.splice(i, 1);
        }
      }

      // Check bullet-enemy collisions
      for (let i = spaceShooterBullets.length - 1; i >= 0; i--) {
        for (let j = spaceShooterEnemies.length - 1; j >= 0; j--) {
          if (spaceShooterBullets[i] && spaceShooterEnemies[j] &&
              spaceShooterBullets[i].x < spaceShooterEnemies[j].x + spaceShooterEnemies[j].width &&
              spaceShooterBullets[i].x + spaceShooterBullets[i].width > spaceShooterEnemies[j].x &&
              spaceShooterBullets[i].y < spaceShooterEnemies[j].y + spaceShooterEnemies[j].height &&
              spaceShooterBullets[i].y + spaceShooterBullets[i].height > spaceShooterEnemies[j].y) {
            spaceShooterEnemies.splice(j, 1);
            spaceShooterBullets.splice(i, 1);
            spaceShooterScore += 10;
            document.getElementById('gameScore').textContent = 'Score: ' + spaceShooterScore;
            break;
          }
        }
      }

      drawSpaceShooter();
    }

    function drawSpaceShooter() {
      // Background
      spaceShooterCtx.fillStyle = '#000';
      spaceShooterCtx.fillRect(0, 0, spaceShooterCanvas.width, spaceShooterCanvas.height);

      // Player
      spaceShooterCtx.fillStyle = '#4ecdc4';
      spaceShooterCtx.fillRect(spaceShooterPlayer.x, spaceShooterPlayer.y, spaceShooterPlayer.width, spaceShooterPlayer.height);
      spaceShooterCtx.strokeStyle = '#fff';
      spaceShooterCtx.lineWidth = 2;
      spaceShooterCtx.strokeRect(spaceShooterPlayer.x, spaceShooterPlayer.y, spaceShooterPlayer.width, spaceShooterPlayer.height);

      // Bullets
      spaceShooterCtx.fillStyle = '#ffd700';
      for (const bullet of spaceShooterBullets) {
        spaceShooterCtx.fillRect(bullet.x, bullet.y, bullet.width, bullet.height);
      }

      // Enemies
      spaceShooterCtx.fillStyle = '#ff8c42';
      for (const enemy of spaceShooterEnemies) {
        spaceShooterCtx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
        spaceShooterCtx.strokeStyle = '#fff';
        spaceShooterCtx.lineWidth = 2;
        spaceShooterCtx.strokeRect(enemy.x, enemy.y, enemy.width, enemy.height);
      }
    }
  </script>
</body>
</html>
